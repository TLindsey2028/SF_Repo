<aura:component implements="flexipage:availableForAllPageTypes,force:appHostable,force:hasRecordId" access="GLOBAL" controller="AQB.BatchItemsController">
    <!-- Batch Items -->
    <aura:handler name="init" action="{!c.myAction}" value="{!this}" />
    <aura:handler name="render" value="{!this}" action="{!c.onRender}"/>
    <!--<aura:handler name="closeTransactionsPopup" event="AQB.closeTransactionsEvent" action="{!c.hideTransactionsPopup}"/>-->
    <aura:handler event="force:showToast" action="{!c.Refresh}" />
    
    <aura:attribute name="doneRendering" type="Boolean" access="GLOBAL" />
    <aura:attribute name="batchId" type="Id" access="GLOBAL" />
    <aura:attribute name="close" type="Boolean" access="GLOBAL" />
    <aura:attribute name="closeStep" type="Integer" access="GLOBAL" />
    <aura:attribute name="closeError1" type="String" access="GLOBAL" />
    <aura:attribute name="closeError2" type="String" access="GLOBAL" />
    <aura:attribute name="closeError3" type="String" access="GLOBAL" />
    <aura:attribute name="batch" type="AQB__Batch__c" access="GLOBAL" default="{'sobjectType': 'AQB__Batch__c'}" />
    <aura:attribute name="batchItems" type="AQB__Batch_Item__c[]" access="GLOBAL" />
    <aura:attribute name="item" type="AQB__Batch_Item__c" default="{'sobjectType': 'AQB__Batch_Item__c'}" /> 
    <aura:attribute name="currentItem" type="AQB__Batch_Item__c" access="GLOBAL" default="{ sobjectType: 'AQB__Batch_Item__c'}" />   
    <aura:attribute name="accountMatches" type="AQB__BatchItemAccountMatch__c[]" access="GLOBAL" />
    <aura:attribute name="accountMatch" type="AQB__BatchItemAccountMatch__c" access="GLOBAL" default="{ sobjectType: 'AQB__BatchItemAccountMatch__c'}" />
    <aura:attribute name="openPledges" type="AQB__Gift__c[]" access="GLOBAL" />   
    <aura:attribute name="gifts" type="AQB__Gift__c[]" access="GLOBAL" />   
    <aura:attribute name="selectedGift" type="AQB__Gift__c" default="{'sobjectType': 'AQB__Gift__c'}"/>   
    <aura:attribute name="recurringGifts" type="AQB__RecurringGift__c[]" access="GLOBAL" />   
    <aura:attribute name="openOpportunities" type="Opportunity[]" access="GLOBAL" />   
    <aura:attribute name="matchPotentials" type="AQB__BatchItemMatchPotential__c[]" access="GLOBAL" />   
    <aura:attribute name="mp" type="AQB__BatchItemMatchPotential__c" access="GLOBAL" default="{ 'sobjectType': 'AQB__BatchItemMatchPotential__c'}"/>   
    <aura:attribute name="matchingAccounts" type="AQB__BatchItemMatchPotential__c[]" access="GLOBAL" />
    <aura:attribute name="matchingCompany" type="String" access="GLOBAL" />
    <aura:attribute name="matchingGifts" type="AQB__Gift__c[]" access="GLOBAL" />   
    <aura:attribute name="selectedTotal" type="Double" access="GLOBAL" />
    <aura:attribute name="quids" type="AQB__BatchItemActivity__c[]" access="GLOBAL" />   
    <aura:attribute name="tributes" type="AQB__BatchItemTribute__c[]" access="GLOBAL" />   
    <aura:attribute name="transactions" type="AQB__BatchItemTransaction__c[]" access="GLOBAL" />  
    <aura:attribute name="openPledgeTransactions" type="AQB__Transaction__c[]" access="GLOBAL" /> 
    <aura:attribute name="giftTransactions" type="AQB__Transaction__c[]" access="GLOBAL" /> 
    <aura:attribute name="voidTransaction" type="AQB__Transaction__c" access="GLOBAL" /> 
    <aura:attribute name="recognitions" type="AQB__BatchItemRecognitions__c[]" access="GLOBAL" />   
    <aura:attribute name="extra" type="AQB__BatchItemExtra__c" access="GLOBAL" default="{ 'sobjectType': 'AQB__BatchItemExtra__c'}" />   
    <aura:attribute name="softCreditAccounts" type="AQB__BatchItemAutomatedSoftCredit__c[]" access="GLOBAL" />
    <aura:attribute name="softCreditAccount" type="Account" default="{ sobjectType: 'Account' }" /> 
    <aura:attribute name="currentSoftCredit" type="Integer" access="GLOBAL" />
    <aura:attribute name="scAccount" type="String" access="GLOBAL" />
    <aura:attribute name="scHeader" type="String" access="GLOBAL" />
    <aura:attribute name="addSoftCredit" type="Boolean" access="GLOBAL" />  
    <aura:attribute name="refresh" type="Boolean" access="GLOBAL" />  
    <aura:attribute name="popupGo" type="Boolean" access="GLOBAL" />  
    <aura:attribute name="popped" type="Boolean" access="GLOBAL" />
    <aura:attribute name="openPledgesPopped" type="Boolean" access="GLOBAL" />  
    <aura:attribute name="showLink" type="Boolean" access="GLOBAL" />  
    <aura:attribute name="newAccount" type="AQB__Batch_Item__c" default="{ sobjectType: 'AQB__Batch_Item__c' }" /> 
    <aura:attribute name="newAccountType" type="Boolean" /> 
    <aura:attribute name="inputAccount" type="Account" default="{ sobjectType: 'Account' }" /> 
    <aura:attribute name="itemId" type="Id" access="GLOBAL" />
    <aura:attribute name="itemTotal" type="Double" access="GLOBAL" />
    <aura:attribute name="newItem" type="AQB__Batch_Item__c" access="GLOBAL" default="{ sobjectType: 'AQB__Batch_Item__c' }" />   
    <aura:attribute name="newTransaction" type="AQB__BatchItemTransaction__c" access="GLOBAL" default="{ sobjectType: 'AQB__BatchItemTransaction__c' }" />   
    <aura:attribute name="numberOfTransactions" type="Integer" access="GLOBAL" />
    <aura:attribute name="currency" type="String" access="GLOBAL" />
    <aura:attribute name="scheduleDetail" type="String" access="GLOBAL" />
    <aura:attribute name="payments" type="AQB__Transaction__c[]" access="GLOBAL" />
    <aura:attribute name="gotPayments" type="Boolean" access="GLOBAL" />
    <aura:attribute name="postAsPayment" type="Boolean" access="GLOBAL" />
    <aura:attribute name="paymentNumber" type="Integer" access="GLOBAL" />
    <aura:attribute name="inputMethod" type="String" access="GLOBAL" />   
    <aura:attribute name="currentSort" type="String" access="GLOBAL" />   
    <aura:attribute name="currentOrder" type="String" access="GLOBAL" />   
    <aura:attribute name="currentItemId" type="String" access="GLOBAL" />   
    <aura:attribute name="currentTransactionId" type="String" access="GLOBAL" />   
    <aura:attribute name="currentTributeId" type="String" access="GLOBAL" />   
    <aura:attribute name="currentRecognitionId" type="String" access="GLOBAL" />   
    <aura:attribute name="currentMatchId" type="String" access="GLOBAL" />
    <aura:attribute name="currentQuidId" type="String" access="GLOBAL" />
    <aura:attribute name="currentAccountName" type="String" access="GLOBAL" />   
    <aura:attribute name="currentCampaign" type="String" access="GLOBAL" />   
    <aura:attribute name="currentAcknowledgement" type="String" access="GLOBAL" />   
    <aura:attribute name="currentPopupId" type="String" access="GLOBAL" />   
    <aura:attribute name="currentLinkIndicator" type="String" access="GLOBAL" />
    <aura:attribute name="currentEditObj" type="String" access="GLOBAL" />
    <aura:attribute name="currentMethod" type="String" access="GLOBAL" />
    <aura:attribute name="designation1" type="String" access="GLOBAL" />   
    <aura:attribute name="designation2" type="String" access="GLOBAL" />   
    <aura:attribute name="designation3" type="String" access="GLOBAL" />   
    <aura:attribute name="designation4" type="String" access="GLOBAL" />   
    <aura:attribute name="designation5" type="String" access="GLOBAL" />   
    <aura:attribute name="transactionNumber" type="Integer" access="GLOBAL" />
    <aura:attribute name="transactionTotal" type="Double" access="GLOBAL" />
    <aura:attribute name="recurringGiftPledgeLink" type="String" access="GLOBAL" />
    <aura:attribute name="selectedCount" type="integer" />
    <aura:attribute name="attachment" type="String" access="GLOBAL" />   
    <aura:attribute name="accountOption" type="String" access="GLOBAL" />  
    <aura:attribute name="showDataEntry" type="Boolean" access="GLOBAL" />
    <aura:attribute name="popupHeader" type="String" access="GLOBAL" />
    <aura:attribute name="useNewValue" type="Boolean" access="GLOBAL" />
    <aura:attribute name="accountDialogReady" type="Boolean" access="GLOBAL" />
    <aura:attribute name="pledgeStartDate" type="Date" access="GLOBAL" />
    <aura:attribute name="pledgeEndDate" type="Date" access="GLOBAL" />
    <aura:attribute name="pledgeSchedule" type="Integer" access="GLOBAL" />
    <aura:attribute name="addPayment" type="Boolean" access="GLOBAL" />
    <aura:attribute name="voidAndCorrect" type="Boolean" access="GLOBAL" />
    <aura:attribute name="disabled" type="Boolean" access="GLOBAL" />
    <aura:attribute name="saveOK" type="Boolean" access="GLOBAL" />
    <aura:attribute name="saveButton" type="Object" access="GLOBAL" />
    <aura:attribute name="saveStatus" type="String" access="GLOBAL" />
    <aura:attribute name="errorMessage" type="String" access="GLOBAL" />
    
    <!--<aura:method name="focus" description="Sets the focus to this component" access="GLOBAL" />-->
    <aura:method name="updateRemainingAmountMethod" action="{!c.updateRemainingAmount}" />
    <aura:method name="saveAddedTransactionsMethod" action="{!c.saveAddedTransactions}" />
    
    <!--<aura:dependency resource="markup://AQB:BatchItemTransactions" />-->
    <aura:dependency resource="markup://force:editRecord" type="EVENT" />
    
    <force:inputField aura:id="hiddenLookup" value="{!v.newItem.AQB__Account__c}" class="slds-hide" />
    
    <!-- PAGE HEADER -->
    <div class="slds-page-header">
        <div class="slds-grid">
            <div class="slds-col slds-has-flexi-truncate">
                <p class="slds-text-title--caps slds-line-height--reset">
                    <aura:if isTrue="{!v.close == true}">Close</aura:if> Batch</p>
                <h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate"><a href="{!'/' + v.batch.Id}" style="color: blue">{!v.batch.Name}</a></h1>
            </div>
        </div>
    </div>
    <br />
    
    <aura:if isTrue="{!v.close == false}"> 
        <!-- Command Buttons -->
        <div style="position: absolute; right: 15px; display: inline; top: 18px" id="deToggle">
            <ui:button label="Hide Data Entry" aura:id="dataEntryButton" press="{!c.dataEntry}" />
        </div>
        
        <!-- Data Entry -->
        <div style="display: block; width=90%" id="dataEntryForm" class="slds-card">     
            <div style="display: block; width=100%" id="topForm">
                <center>
                    <legend class="slds-form-element__label">
                        <span style="font-weight: bold;">Enter the donor's Account and the type of Entry that you wish to perform.&nbsp;&nbsp;If you are processing a matching gift form, the Account entered should be that of the original donor, not the organization matching the gift.</span>
                    </legend>
                </center>
                <table class="slds-table">
                    <tr>
                        <td style="padding-left: 50px; width: 10%"><span style="font-weight: bold; color: red">*</span>Account:</td>
                        <td style="width: 30%">
                            <force:inputField aura:id="inputAccountLookup" value="{!v.newItem.AQB__Account__c}" required="true" change="{!c.checkMethod}" />
                        </td>
                        <td style="padding-left: 50px; width: 10%;"><span style="font-weight: bold; color: red">*</span>Entry Type:</td>
                        <td style="width: 10%;">
                            <force:inputField aura:id="inputMethod" value="{!v.newItem.AQB__Method__c}" change="{!c.updateMethod}" required="true" />
                            <force:outputField aura:id="inputMethod2" value="{!v.newItem.AQB__Method__c}" />
                        </td>
                        <td style="padding-left: 50px; width: 10%">
                            <span aura:id="pScheduleLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span><span id="pScheduleLabel" class="slds-truncate">Pledge Schedule Type:</span></span>
                            <span aura:id="pWriteOffNotationLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Write Off Notation:</span>
                            <span aura:id="mpMethodLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Matching Method:</span>                                    
                            <span aura:id="pgMethodLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Payment Method:</span>                                    
                        </td>
                        <td style="padding-right: 50px; width: 30%">
                            <span aura:id="pScheduleField" class="slds-truncate"><force:inputField value="{!v.newItem.AQB__PledgeScheduleType__c}" change="{!c.updatePledgeForm}" /></span>
                            <span aura:id="pWriteOffNotationField" class="slds-truncate"><force:inputField value="{!v.newItem.AQB__PledgeWriteOffNotation__c}" change="{!c.updateWriteOffForm}" /></span>
                            <span aura:id="mpMethodField" class="slds-truncate"><force:inputField value="{!v.newItem.AQB__MatchMethod__c}" change="{!c.updateMatchingPayment}" /></span>
                            <span aura:id="pgMethodField" class="slds-truncate"><force:inputField value="{!v.newItem.AQB__PaymentMethod__c}" change="{!c.updatePlannedGift}" /></span>
                        </td>
                    </tr>
                </table>
                <br />
            </div>
            <!-- Planned Gift Fields -->
            <div style="display: none; width=100%" id="plannedGiftForm">
                <center>
                    <div aura:id="inputForm">
                        <table class="slds-table slds-table--bordered" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Instrument</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Maturity Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Total Asset Amount</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Tax Amount</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Initial Net Present Value</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Revocable</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__Instrument__c}" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__MaturityDate__c}" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__TotalAssetAmount__c}" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__TaxAmount__c}" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__InitialNetPresentValue__c}" />
                                    </td>
                                    <td>
                                        <center><force:inputField value="{!v.newItem.AQB__Revocable__c}" /></center>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                    </div>
                </center>
            </div>
            <!-- Payment on Pledge -->
            <div style="display: none;" id="paymentform">
                <center>
                    <div aura:id="inputForm" style="overflow: auto;">
                        <table class="slds-table slds-table--bordered" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Account</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Amount</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Designation</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Acknowledgement</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Anonymity</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="text-align:center">
                                        {!v.currentAccountName}
                                    </td>
                                    <td style="text-align:center">
                                        {!v.itemTotal}
                                    </td>
                                    <td style="text-align:center">
                                        {!v.currentCampaign}
                                    </td>
                                    <td style="text-align:center">
                                        {!v.designation1}
                                    </td>
                                    <td style="text-align:center">
                                        {!v.currentAcknowledgement}
                                    </td>
                                    <td style="text-align:center">
                                        {!v.newItem.AQB__AnonymityLevel__c}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <table class="slds-table slds-table--bordered" style="width=50%;">
                            <tr>
                                <td style="padding-left: 20%; width: 10%; text-align:right"><span style="font-weight: bold; color: red">*</span>Payment Method:</td>
                                <td style="padding-left: 50px; width: 40%;"><force:inputField value="{!v.newItem.AQB__PaymentMethod__c}" change="{!c.updatePaymentMethod}" /></td>
                                <td style="padding-left: 10%; width: 10%; text-align:right;">&nbsp;&nbsp;</td>	
                                <td style="padding-right: 30%; width: 40%; text-align:left;">&nbsp;&nbsp;</td>
                            </tr>
                        </table>
                    </div>
                </center>
            </div>
    		<!-- Transaction to be Voided and Corrected -->
			<div style="display: none;" id="corrrectionform">
                <center>
            		<legend class="slds-form-element__label">
                    	<span style="font-weight: bold;">Transaction to be voided:</span>
                    </legend>
                    <table class="slds-table slds-table--bordered" style="width=100%;">
                        <thead>
                            <tr class="slds-text-heading--label">
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction #</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Date</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Type</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Method</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                                <th scope="col" style="text-align:right"><span class="slds-truncate">Amount</span></th>
                                <th scope="col" style="text-align:right"><span class="slds-truncate">Balance</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Due Date</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Designaiton</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="text-align:center">
                                    <a href="{!'/' + v.voidTransaction.Id}" target="_blank">{!v.voidTransaction.Name}</a>
                                </td>
                                <td style="text-align:center">
                                    <ui:outputDate value="{!v.voidTransaction.AQB__Date__c}" />
                                </td>
                                <td style="text-align:center">
                                    {!v.voidTransaction.AQB__Type__c}
                                </td>
                                <td style="text-align:center">
                                    {!v.voidTransaction.AQB__Method__c}
                                </td>
                                <td style="text-align:center">
                                    {!v.voidTransaction.AQB__CampaignAppeal__r.Name}
                                </td>
                                <td style="text-align:right">
                                    <ui:outputCurrency value="{!v.voidTransaction.AQB__Amount__c}" />
                                </td>
                                <td style="text-align:right">
                                    <ui:outputCurrency value="{!v.voidTransaction.AQB__Balance__c}" />
                                </td>
                                <td style="text-align:center">
                                    <ui:outputDate value="{!v.voidTransaction.AQB__DateDue__c}" />
                                </td>
                                <td style="text-align:center">
                                    {!v.voidTransaction.AQB__ChartofAccounts__r.Name}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <legend class="slds-form-element__label">
                    	<span style="font-weight: bold;">Enter the correcting Transaction:</span>
                    </legend>
                </center>
            </div>
            <!-- Add Transaction to Existing Gift -->
            <div style="display: none; width=100%" id="addTransForm">
                <center>
                    <legend class="slds-form-element__label">
                        <span style="font-weight: bold;">Gift to add Transactions:</span>
                    </legend>
                    <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                        <thead>
                            <tr class="slds-text-heading--label">
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Account</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Gift/Pledge #</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Date</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Fundraising Campaign</span></th>
                                <th scope="col" style="text-align:right"><span class="slds-truncate">Total Gift</span></th> 
                                <th scope="col" style="text-align:right"><span class="slds-truncate">Pledge Balance</span></th> 
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Matched</span></th> 
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="text-align:center">
                                    <a href="{!'/' + v.selectedGift.AQB__Account__c}" target="_blank">{!v.selectedGift.AQB__Account__r.Name}</a>
                                </td>
                                <td style="text-align:center">
                                    <a href="{!'/' + v.selectedGift.Id}" target="_blank">{!v.selectedGift.Name}</a>
                                </td>
                                <td style="text-align:center">
                                    {!v.selectedGift.AQB__Date__c}
                                </td>
                                <td style="text-align:center">
                                    <a href="{!'/' + v.selectedGift.AQB__CampaignFund__c}" target="_blank">{!v.selectedGift.AQB__CampaignFund__r.Name}</a>
                                </td>
                                <td style="text-align:right">
                                    <ui:outputCurrency value="{!v.selectedGift.AQB__TotalGift__c}" />
                                </td>
                                <td style="text-align:right">
                                    <ui:outputCurrency value="{!v.selectedGift.AQB__PledgeBalanceTotal__c}" />
                                </td>
                                <td>
                                    <center><ui:outputCheckbox value="{!v.selectedGift.AQB__Matched__c}"/></center>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <br />
                    <table class="slds-table slds-table--bordered" style="width=50%;">
                        <tr>
                            <td style="padding-left: 20%; width: 10%; text-align:right"><span style="font-weight: bold; color: red">*</span>Payment Method:</td>
                            <td style="padding-left: 50px; width: 40%;"><force:inputField value="{!v.newItem.AQB__PaymentMethod__c}" change="{!c.updatePaymentMethod}" /></td>
                            <td style="padding-left: 50px; width: 10%"><span aura:id="aScheduleLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Pledge Schedule Type:</span></td>
                            <td style="padding-right: 50px; width: 30%"><span aura:id="aScheduleField" class="slds-truncate"><force:inputField value="{!v.newItem.AQB__PledgeScheduleType__c}" change="{!c.updatePledgeForm}" /></span></td>
                        </tr>
                    </table>
                </center>
            </div>
            
            <!-- Cash, Check, ACH, Wire, PayPal, Personal Property, Real Property, Payroll Deduction, Transfer & Soft Credit -->
            <div style="display: none; width=100%" id="form1">
                <center>
                    <div aura:id="inputForm">
                        <table class="slds-table slds-table--bordered" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Amount</span></th>
                                    <th scope="col" style="text-align:center">
                                        <span aura:id="checkLabel" class="slds-truncate">Check Number</span>
                                        <span aura:id="referenceLabel" class="slds-truncate">Reference</span>
                                    	<span aura:id="pCategoryLabel" class="slds-truncate">Property Category</span>
                            		</th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate" aura:id="campaignLabel"><span style="font-weight: bold; color: red">*</span>Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate" aura:id="designationLabel"><span style="font-weight: bold; color: red">*</span>Designation</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Acknowledgement</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">
                                        <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}">
                                        	<span style="font-weight: bold; color: red">*</span>
                                        </aura:if>
                                        Description</span></th> 
                                    <th scope="col" style="text-align:center" aura:id="anonyLabel"><span class="slds-truncate">Anonymity</span></th> 
                                    <th scope="col" style="text-align:center">
                                        <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Transfer'}">
                                        	<span class="slds-truncate">Origins</span>
                                        </aura:if>
                            		</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <fieldset id="inputAmount"><force:inputField value="{!v.newItem.AQB__Amount__c}" change="{!c.check4Pledges}" required="true" /></fieldset>
                                    </td>
                                    <td>
                                        <span aura:id="checkField"><force:inputField value="{!v.newItem.AQB__CheckNumber__c}" /></span>
                                        <span aura:id="referenceField"><force:inputField value="{!v.newItem.AQB__Reference__c}" /></span>
                                    	<span aura:id="pCategoryField"><force:inputField value="{!v.newItem.AQB__Transaction1PropertyCategory__c}" /></span>
                            		</td>
                                    <td>
                                        <span aura:id="campaignField"><force:inputField value="{!v.batch.AQB__DefaultCampaignAppeal__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <span aura:id="designationField"><force:inputField value="{!v.batch.AQB__DefaultChartofAccounts__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultAcknowledgement__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__Description__c}" />
                                    </td>
                                    <td>
                                        <center><span aura:id="anonyField"><force:inputField value="{!v.newItem.AQB__AnonymityLevel__c}" /></span></center>
                                    </td>
                                    <td>
                                        <span aura:id="originsField"><force:inputField value="{!v.newItem.AQB__Origins__c}" /></span>
                                   </td> 
                                </tr>
                        </tbody>
                        </table>
                        <br />
                        <div style="display: none;" id="tempFieldSet1">
                            <table class="slds-table slds-table--bordered">
                                <tr>
                                    <td style="width: 250px;">&nbsp;&nbsp;</td>
                                    <td style="text-align:right;"><span aura:id="gDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="gDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="text-align:right;"><span aura:id="bbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="bbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
									<td style="width: 400px;">&nbsp;&nbsp;</td>
                                    
                                    <!--
                                    <td style="padding-left: 5%; width: 10%; text-align:right"><span aura:id="gDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="gDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="padding-left: 5%; width: 10%; text-align:right"><span aura:id="bbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="bbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
                                	<td style="padding-left: 5%; width: 5%; text-align:right">&nbsp;&nbsp;</td>-->
                                </tr>
                         	</table>
                            <br />
                        </div>
                        <span id="FieldSet" class="slds-truncate"></span>
                        <aura:if isTrue="{!v.addPayment == true}">
                        	<ui:button label="Save Payment" press="{!c.savePayment}" />
                            <aura:set attribute="else">
                                <ui:button label="Save" press="{!c.saveNewTransaction}" />
                                <aura:if isTrue="{!and(v.voidAndCorrect == false, v.currentLinkIndicator != 'AddTransaction')}">
                                	<ui:button label="Save and Add Soft Credit" press="{!c.saveAddCredit}" />
                                	<ui:button label="Add another Transaction" press="{!c.addTransaction}" />
                                </aura:if>
                            </aura:set>
                        </aura:if>
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            
            <!-- Pledge -->
            <div style="display: none;" id="pledgeform">
                <center>
                    <div aura:id="inputForm" style="overflow: auto;">
                        <table class="slds-table slds-table--bordered" style="width=100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span style="font-weight: bold; color: red">*</span><span id="pAmountLabel" class="slds-truncate">Total Pledge</span></th>
                                    <th scope="col" style="text-align:center"><span aura:id="pPaymentLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span># of Payments</span></th>
                                    <th scope="col" style="text-align:center"><span aura:id="pFrequencyLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Paid Every</span></th>
                                    <th scope="col" style="text-align:center"><span aura:id="pIntervalLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Interval</span></th>
                                    <th scope="col" style="text-align:center"><span id="pDueLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>1st Payment Due</span></th>
                                    <th scope="col" style="text-align:center"><span aura:id="pEndDateLabel" class="slds-truncate">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: red">*</span>Ending By&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Pledge Type</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Bill?</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: red">*</span>Campaign Appeal&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: red">*</span>Designation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">&nbsp;&nbsp;<span style="font-weight: bold; color: red">*</span>Acknowledgement&nbsp;&nbsp;</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Description</span></th> 
                                    <aura:if isTrue="{!v.newItem.AQB__Methid__c == 'Pledge'}">
                                    	<th scope="col" style="text-align:center"><span class="slds-truncate">Anonymity</span></th> 
                                    </aura:if>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <fieldset id="inputAmount2"><force:inputField value="{!v.newItem.AQB__Amount__c}" required="true" /></fieldset>
                                    </td>
                                    <td>
                                        <span aura:id="pPaymentField"><force:inputField value="{!v.newItem.AQB__NumberOfPayments__c}" required="true" change="{!c.resetPayments}" /></span>
                                    </td>
                                    <td>
                                        <span aura:id="pFrequencyField"><force:inputField value="{!v.newItem.AQB__Frequency__c}" required="true" change="{!c.resetPayments}" /></span>
                                    </td>
                                    <td>
                                        <span aura:id="pIntervalField"><force:inputField value="{!v.newItem.AQB__PledgeInterval__c}" change="{!c.resetPayments}" /></span>
                                    </td>
                                    <td>
                                        <force:inputField aura:id="pledgeStartDate" value="{!v.newItem.AQB__PledgeStartDate__c}" required="true" change="{!c.resetPayments}" />
                                    </td>
                                    <td>
                                        <span aura:id="pEndDateField"><force:inputField aura:id="pledgeEndDate" value="{!v.newItem.AQB__PledgeEndDate__c}" required="true" change="{!c.resetPayments}" /></span>
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__PledgeType__c}" />
                                    </td>
                                    <td>
                                        <center><force:inputField value="{!v.newItem.AQB__SendPledgeReminder__c}" /></center>
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultCampaignAppeal__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultChartofAccounts__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultAcknowledgement__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__Description__c}" />
                                    </td>
                                    <td>
                                        <span aura:id="annonField"><center><force:inputField value="{!v.newItem.AQB__AnonymityLevel__c}" /></center></span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <div style="display: none; width=50%" id="tempFieldSetP">
                            <table class="slds-table slds-table--bordered" style="width=50%;">
                                <tr>
                                    <td style="width: 250px;">&nbsp;&nbsp;</td>
                                    <td style="text-align:right;"><span aura:id="pgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="pgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="text-align:right;"><span aura:id="pbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="pbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
									<td style="width: 400px;">&nbsp;&nbsp;</td>
                                    <!--
                                    <td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>
                                    <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="pgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="pgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="pbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="pbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
                                	<td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td> -->
                                </tr>
                         	</table>
                            <br />
                        </div>
                        <br />
                        <aura:if isTrue="{!v.gotPayments == true}">  
                            <legend class="slds-form-element__label">
                                <span style="font-weight: bold; color: blue;">{!v.scheduleDetail}</span>
                            </legend>
                            <table class="slds-table slds-table--bordered" style="width:50%;">
                                <thead>
                                    <tr class="slds-text-heading--label">
                                        <th scope="col" style="text-align:center"><span class="slds-truncate">Payment #</span></th>
                                        <th scope="col" style="text-align:center"><span class="slds-truncate">Due Date</span></th>
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Amount</span></th>
                                        <aura:if isTrue="{!v.batch.AQB__DefaultCurrency__c != null}">
                                            <th scope="col" style="text-align:center"><span class="slds-truncate">Currency</span></th> 
                                            <th scope="col" style="text-align:right"><span class="slds-truncate">Units</span></th> 
                                            <th scope="col" style="text-align:right"><span class="slds-truncate">Exchange Rate</span></th> 
                                        </aura:if>
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.payments}" var="payment">
                                        <tr>
                                            <td style="text-align:center">
                                                {!payment.AQB__PaymentNumber__c}
                                            </td>
                                            <td style="text-align:center">
                                                {!payment.AQB__DateDue__c}
                                            </td>
                                            <td style="text-align:right">
                                                <ui:outputCurrency value="{!payment.AQB__Amount__c}"/>
                                            </td>
                                            <aura:if isTrue="{!v.batch.AQB__DefaultCurrency__c != null}">
                                                <td style="text-align:center">
                                                    {!v.currency}
                                                </td>
                                                <td style="text-align:right">
                                                    {!payment.AQB__CurrencyUnits__c}
                                                </td>
                                                <td style="text-align:right">
                                                    {!payment.AQB__CurrencyExchangeRate__c}
                                                </td>
                                            </aura:if>
                                        </tr>
                                    </aura:iteration>
                                </tbody>
                            </table>
                            <br />
                            <ui:button label="Save" press="{!c.saveNewTransaction}" />
                            <aura:if isTrue="{!v.currentLinkIndicator != 'AddTransaction'}">
                                <ui:button label="Save and Add a Payment" press="{!c.addPayment}" />
                            	<ui:button label="Save and Add New Schedule" press="{!c.addNewSchedule}" />
                            	<ui:button label="Save and Add Soft Credit" press="{!c.saveAddCredit}" />
                            </aura:if>
                            <ui:button label="Cancel" press="{!c.resetForm}" />
                            <aura:set attribute="else">
                                <aura:if isTrue="{!v.voidAndCorrect == true}"> 
                                    <ui:button label="Save" press="{!c.saveNewTransaction}" />
                                    <aura:set attribute="else">
                                		<ui:button label="Calculate Payments" press="{!c.calculatePayments}" />
                                    </aura:set>
                                </aura:if>
                                <ui:button label="Cancel" press="{!c.resetForm}" />
                            </aura:set>
                        </aura:if>
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            <!-- Credit Card -->
            <div style="display: none; width=100%" id="ccform">
                <center>
                    <div aura:id="inputForm">
                        <table class="slds-table slds-table--bordered" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Amount</span></th>
                                    <!--<th scope="col" style="text-align:center"><span class="slds-truncate">Name on Card</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Card</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Last 4 Digits</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Exp. Month</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Exp. Year</span></th>-->
                                    <th scope="col" style="text-align:center"><span class="slds-truncate" aura:id="cCampaignLabel"><span style="font-weight: bold; color: red">*</span>Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate" aura:id="cDesignationLabel"><span style="font-weight: bold; color: red">*</span>Designation</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Acknowledgement</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Description</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate" aura:id="cAnonyLabel">Anonymity</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <fieldset id="inputAmount3"><force:inputField value="{!v.newItem.AQB__Amount__c}" change="{!c.check4Pledges}" required="true" /></fieldset>
                                    </td>
                                    <!--<td>
                                        <span><force:inputField value="{!v.newItem.AQB__NameOnCard__c}" /></span>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__CreditCard__c}" /></span>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__Last4DigitsOnCard__c}" /></span>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__ExpirationMonth__c}" /></span>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__ExpirationYear__c}" /></span>
                                    </td>-->
                                    <td>
                                        <span aura:id="cCampaignField"><force:inputField value="{!v.batch.AQB__DefaultCampaignAppeal__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <span aura:id="cDesignationField"><force:inputField value="{!v.batch.AQB__DefaultChartofAccounts__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultAcknowledgement__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__Description__c}" />
                                    </td>
                                    <td>
                                        <center><span aura:id="cAnonyField"><force:inputField value="{!v.newItem.AQB__AnonymityLevel__c}" /></span></center>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <div style="display: none; width=50%" id="tempFieldSetCC">
                            <table class="slds-table slds-table--bordered" style="width=50%;">
                                <tr>
                                    <td style="width: 250px;">&nbsp;&nbsp;</td>
                                    <td style="text-align:right;"><span aura:id="cgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="cgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="text-align:right;"><span aura:id="cbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="cbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
									<td style="width: 400px;">&nbsp;&nbsp;</td>
                                    <!--
                                    <td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>
                                    <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="cgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="cgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="cbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="cbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
                                	<td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>-->
                                </tr>
                         	</table>
                            <br />
                        </div>
                        <aura:if isTrue="{!v.addPayment == true}">
                        	<ui:button label="Save Payment" press="{!c.savePayment}" />
                            <aura:set attribute="else">
                                <ui:button label="Save" press="{!c.saveNewTransaction}" />
                                <aura:if isTrue="{!and(v.voidAndCorrect == false, v.currentLinkIndicator != 'AddTransaction')}">
                                    <ui:button label="Save and Add Soft Credit" press="{!c.saveAddCredit}" />
                                	<ui:button label="Add another Transaction" press="{!c.addTransaction}" />
                                </aura:if>
                            </aura:set>
                        </aura:if>
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            <!-- Securities -->
            <div style="display: none; width=100%" id="securitiesform">
                <center>
                    <div aura:id="inputForm">
                        <table class="slds-table slds-table--bordered" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Ticker Symbol</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Number of Shares</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Transfer Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Daily Low</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Daily High</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate" aura:id="sCampaignLabel"><span style="font-weight: bold; color: red">*</span>Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate" aura:id="sDesignationLabel"><span style="font-weight: bold; color: red">*</span>Designation</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Acknowledgement</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Description</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate" aura:id="sAnonyLabel">Anonymity</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__TickerSymbol__c}" required="true" change="{!c.check4Pledges}" />
                                    </td>
                                    <td>
                                        <fieldset id="inputAmount4"><force:inputField value="{!v.newItem.AQB__NumberOfShares__c}" required="true" /></fieldset>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__DateOfTransfer__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__DailyLow__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__DailyHigh__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <span aura:id="sCampaignField"><force:inputField value="{!v.batch.AQB__DefaultCampaignAppeal__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <span aura:id="sDesignationField"><force:inputField value="{!v.batch.AQB__DefaultChartofAccounts__c}" required="true" /></span>
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultAcknowledgement__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__Description__c}" />
                                    </td>
                                    <td>
                                        <center><span aura:id="sAnonyField"><force:inputField value="{!v.newItem.AQB__AnonymityLevel__c}" /></span></center>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <div style="display: none; width=50%" id="tempFieldSetSec">
                            <table class="slds-table slds-table--bordered" style="width=50%;">
                                <tr>
                                    <td style="width: 250px;">&nbsp;&nbsp;</td>
                                    <td style="text-align:right;"><span aura:id="sgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="sgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="text-align:right;"><span aura:id="sbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="sbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
									<td style="width: 400px;">&nbsp;&nbsp;</td>
                                    <!--
                                    <td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>
                                    <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="sgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="sgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="sbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="sbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
                                	<td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td> -->
                                </tr>
                         	</table>
                            <br />
                        </div>
                        <aura:if isTrue="{!v.addPayment == true}">
                        	<ui:button label="Save Payment" press="{!c.savePayment}" />
                            <aura:set attribute="else">
                                <ui:button label="Save" press="{!c.saveNewTransaction}" />
                                <ui:button label="Add another Transaction" press="{!c.addTransaction}" />
                            </aura:set>
                        </aura:if>
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            <!-- Service -->
            <div style="display: none; width=100%" id="serviceform">
                <center>
                    <div aura:id="inputForm">
                        <table class="slds-table slds-table--bordered" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Amount</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Service</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Hours</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Rate</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Designation</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Acknowledgement</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Description</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Anonymity</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <fieldset id="inputAmount5"><force:inputField value="{!v.newItem.AQB__Amount__c}" required="true" /></fieldset>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__ServiceType__c}" /></span>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__Hours__c}" /></span>
                                    </td>
                                    <td>
                                        <span><force:inputField value="{!v.newItem.AQB__Rate__c}" /></span>
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultCampaignAppeal__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultChartofAccounts__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultAcknowledgement__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__Description__c}" required="true" />
                                    </td>
                                    <td>
                                        <center><force:inputField value="{!v.newItem.AQB__AnonymityLevel__c}" /></center>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <div style="display: none; width=50%" id="tempFieldSetSer">
                            <table class="slds-table slds-table--bordered" style="width=50%;">
                                <tr>
                                    <td style="width: 250px;">&nbsp;&nbsp;</td>
                                    <td style="text-align:right;"><span aura:id="rgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="rgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="text-align:right;"><span aura:id="rbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="width: 200px;"><span aura:id="rbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
									<td style="width: 400px;">&nbsp;&nbsp;</td>
                                    <!--
                                    <td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>
                                    <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="rgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="rgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="rbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="padding-left: 50px; width: 20%;"><span aura:id="rbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
                                	<td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>-->
                                </tr>
                         	</table>
                            <br />
                        </div>
                        <aura:if isTrue="{!v.addPayment == true}">
                        	<ui:button label="Save Payment" press="{!c.savePayment}" />
                            <aura:set attribute="else">
                                <ui:button label="Save" press="{!c.saveNewTransaction}" />
                            </aura:set>
                        </aura:if>
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            <!-- Pledge Payment -->
            <div style="display: none;" id="pledgePaymentForm">
                <center>
                    <div aura:id="inputForm" style="overflow: auto;">
                        <legend class="slds-form-element__label">
                            <span style="font-weight: bold;">Enter the Total Amount of the Payment and enter below the individual amounts of the transactions to be paid:</span>
                        </legend>
                        <table class="slds-table slds-table--bordered" style="width=96%; display: none;" id="PPsecurities">
                            <tr>
                                <td style="padding-left: 1%; text-align:left;"><span style="font-weight: bold; color: red">*</span>Ticker Symbol:</td>
                                <td><force:inputField value="{!v.newItem.AQB__TickerSymbol__c}" required="true" /></td>
                                <td style="padding-left: 1%; text-align:left;"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Number of Shares:</span></td>
                                <td><force:inputField value="{!v.newItem.AQB__NumberOfShares__c}" required="true" change="{!c.updateAmount}" /></td>
                                <td style="padding-left: 1%; text-align:left;"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Transfer Date:</span></td>
                                <td><force:inputField value="{!v.newItem.AQB__DateOfTransfer__c}" required="true" /></td>
                                <td style="padding-left: 1%; text-align:left;"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Daily Low:</span></td>
                                <td><force:inputField value="{!v.newItem.AQB__DailyLow__c}" required="true" change="{!c.updateAmount}" /></td>
                                <td style="padding-left: 1%; text-align:left;"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Daily High:</span></td>
                                <td style="padding-right: 1%;"><force:inputField value="{!v.newItem.AQB__DailyHigh__c}" required="true" change="{!c.updateRemainingAmount}" /></td>
                            </tr>
                        </table>
                        <table class="slds-table slds-table--bordered" style="width=96%;">
                            <tr>
                                <td style="padding-left: 2%; text-align:right"><span style="font-weight: bold; color: red">*</span>Total Amount:</td>
                                <td style="padding-left: 1%;"><force:inputField aura:id="inputAmount9" value="{!v.newItem.AQB__Amount__c}" required="true" change="{!c.updateRemainingAmount}" /></td>
                                <td style="padding-left: 2%; text-align:right;">Remaining Amount:</td>	
                                <td style="padding-left: 1%; text-align:left; font-weight: bold;"><ui:outputCurrency value="{!v.transactionTotal}" /></td>
                                <td style="padding-left: 2%; text-align:right;">
                                    <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Check'}"> 
                                        <span class="slds-truncate">Check Number:</span>
                                        <aura:set attribute="else">
                                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'ACH' || v.newItem.AQB__Method__c == 'Wire' || v.newItem.AQB__Method__c == 'PayPal' || v.currentMethod == 'Transfer'}"> 
                                                <span class="slds-truncate">Reference:</span>
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                                        <span class="slds-truncate">Property Category:</span>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </aura:set>
                                    </aura:if>
                                </td>
                                <td style="padding-left: 1%;">
                                    <span aura:id="PPcheckField"><force:inputField value="{!v.newItem.AQB__CheckNumber__c}" /></span>
                                    <span aura:id="PPreferenceField"><force:inputField value="{!v.newItem.AQB__Reference__c}" /></span>
                                    <span aura:id="PPpCategoryField"><force:inputField value="{!v.newItem.AQB__Transaction1PropertyCategory__c}" /></span>
                                </td>
                            	<td style="padding-left: 2%; text-align:right"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Acknowledgement:</span></td> 
                                <td style="padding-left: 1%;"><force:inputField value="{!v.batch.AQB__DefaultAcknowledgement__c}" required="true" /></td>    
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                	<td><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Description:</span></td> 
                                </aura:if>
                                <td style="padding-right: 2%;"><span aura:id="PPdescriptionField"><force:inputField value="{!v.newItem.AQB__Description__c}" /></span></td>
                            </tr>
                            <tr>
                                <td style="text-align:right"><span aura:id="ppDateLabel" class="slds-truncate">Gift Date:</span></td>
                                <td><span aura:id="ppDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                <td style="text-align:right"><span aura:id="ppcDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                <td><span aura:id="ppcDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
                        	</tr>
                        </table>
                        <table class="slds-table slds-table--bordered" style="width=100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Amount</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Gift Number</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction Number</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction Date</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Balance</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Due Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Designation</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.openPledgeTransactions}" var="ptrans">
                                    <tr>
                                        <td style="text-align:right">
                                            <ui:inputCurrency aura:id="PPamt" value="" class="{!ptrans.Id}" change="{!c.updatePP}" size="5" />
                                        </td>
                                        <td style="text-align:center">
                                            <a href="{!'/' + ptrans.AQB__Gift__c}" target="_blank">{!ptrans.AQB__Gift__r.Name}</a>
                                        </td>
                                        <td style="text-align:center">
                                            <a href="{!'/' + ptrans.Id}" target="_blank">{!ptrans.Name}</a>
                                        </td>
                                        <td style="text-align:center">
                                            <ui:outputDate value="{!ptrans.AQB__Date__c}" />
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!ptrans.AQB__Balance__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            <ui:outputDate value="{!ptrans.AQB__DateDue__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            {!ptrans.AQB__CampaignAppeal__r.Name}
                                        </td>
                                        <td style="text-align:center">
                                            {!ptrans.AQB__ChartofAccounts__r.Name}
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <ui:button label="Pay Pledge" press="{!c.confirmPledgePayment}" />
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            <!-- Write Off -->
            <div style="display: none;" id="writeOffForm">
                <center>
                    <div aura:id="inputForm" style="overflow: auto;">
                        <table class="slds-table slds-table--bordered" style="width=100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><center><ui:inputCheckbox aura:id="checkAllTrans" value="true" change="{!c.selectAll}" /></center></span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction Number</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction Date</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Balance</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Due Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Designaiton</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.openPledgeTransactions}" var="ptrans">
                                    <tr>
                                        <td>
                                            <center><ui:inputCheckbox text="{!ptrans.Id}" aura:id="boxPack" value="true" change="{!c.checkboxSelect}" /></center>
                                        </td>
                                        <td style="text-align:center">
                                            <a href="{!'/' + ptrans.Id}" target="_blank">{!ptrans.Name}</a>
                                        </td>
                                        <td style="text-align:center">
                                            <ui:outputDate value="{!ptrans.AQB__Date__c}" />
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!ptrans.AQB__Balance__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            <ui:outputDate value="{!ptrans.AQB__DateDue__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            {!ptrans.AQB__CampaignAppeal__r.Name}
                                        </td>
                                        <td style="text-align:center">
                                            {!ptrans.AQB__ChartofAccounts__r.Name}
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <ui:button label="Write Off checked Transactions" press="{!c.writeOffTrans}" />
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            <!-- Voids -->
            <div style="display: none;" id="voidForm">
                <center>
                    <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                        <thead>
                            <tr class="slds-text-heading--label">
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Gift/Pledge #</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Date</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Fundraising Campaign</span></th>
                                <th scope="col" style="text-align:right"><span class="slds-truncate">Total Gift</span></th> 
                                <th scope="col" style="text-align:right"><span class="slds-truncate">Pledge Balance</span></th> 
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Matched</span></th> 
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="text-align:center">
                                    <a href="{!'/' + v.selectedGift.Id}" target="_blank">{!v.selectedGift.Name}</a>
                                </td>
                                <td style="text-align:center">
                                    {!v.selectedGift.AQB__Date__c}
                                </td>
                                <td style="text-align:center">
                                    <a href="{!'/' + v.selectedGift.AQB__CampaignFund__c}" target="_blank">{!v.selectedGift.AQB__CampaignFund__r.Name}</a>
                                </td>
                                <td style="text-align:right">
                                    <ui:outputCurrency value="{!v.selectedGift.AQB__TotalGift__c}" />
                                </td>
                                <td style="text-align:right">
                                    <ui:outputCurrency value="{!v.selectedGift.AQB__PledgeBalanceTotal__c}" />
                                </td>
                                <td>
                                    <center><ui:outputCheckbox value="{!v.selectedGift.AQB__Matched__c}"/></center>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <br />
                    <div aura:id="inputForm" style="overflow: auto;">
                        <legend class="slds-form-element__label">
                            <span style="font-weight: bold;">Select the transaction(s) below that are to be voided:</span>
                        </legend>
                        <table class="slds-table slds-table--bordered" style="width=100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><center><ui:inputCheckbox aura:id="checkAllTransV" value="true" change="{!c.selectAllV}" /></center></span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction #</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Type</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Method</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Amount</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Balance</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Due Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Designaiton</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.giftTransactions}" var="trans">
                                    <tr>
                                        <td>
                                            <center>
                                                <aura:if isTrue="{!trans.AQB__Voided__c == True}">
                                                    <span style="color:gray;">Voided</span> 
                                                    <aura:set attribute="else">
                                                        <aura:if isTrue="{!and(trans.AQB__Method__c == 'Pledge', trans.AQB__Balance__c == 0)}">
                                                            <span style="color:gray;">Paid</span>
                                                            <aura:set attribute="else">
                                                                <ui:inputCheckbox text="{!trans.Id}" aura:id="boxPackV" value="true" change="{!c.checkboxSelectV}" />
                                                            </aura:set>
                                                        </aura:if>
                                                    </aura:set>
                                                </aura:if>
                                        	</center>
                                        </td>
                                        <td style="text-align:center">
                                            <a href="{!'/' + trans.Id}" target="_blank">{!trans.Name}</a>
                                        </td>
                                        <td style="text-align:center">
                                            <ui:outputDate value="{!trans.AQB__Date__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            {!trans.AQB__Type__c}
                                        </td>
                                        <td style="text-align:center">
                                            {!trans.AQB__Method__c}
                                        </td>
                                        <td style="text-align:center">
                                            {!trans.AQB__CampaignAppeal__r.Name}
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!trans.AQB__Amount__c}" />
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!trans.AQB__Balance__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            <ui:outputDate value="{!trans.AQB__DateDue__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            {!trans.AQB__ChartofAccounts__r.Name}
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <ui:button label="Void checked Transactions" press="{!c.confirmVoidTrans}" />
                        <ui:button label="Void Transaction and Add Correction" press="{!c.confirmVoidAndCorrect}" aura:id="voidCorrectButton" />
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            <!-- Matching Gift -->
            <div style="display: none; width=100%" id="matchform">
                <center>
                    <div aura:id="inputForm">
                        <legend class="slds-form-element__label">
                            <span style="font-weight: bold;">Gift to be matched:</span>
                        </legend>
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Gift/Pledge #</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Fundraising Campaign</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Total Gift</span></th> 
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Pledge Balance</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Matched</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="text-align:center">
                                        <a href="{!'/' + v.selectedGift.Id}" target="_blank">{!v.selectedGift.Name}</a>
                                    </td>
                                    <td style="text-align:center">
                                        {!v.selectedGift.AQB__Date__c}
                                    </td>
                                    <td style="text-align:center">
                                        <a href="{!'/' + v.selectedGift.AQB__CampaignFund__c}" target="_blank">{!v.selectedGift.AQB__CampaignFund__r.Name}</a>
                                    </td>
                                    <td style="text-align:right">
                                        <ui:outputCurrency value="{!v.selectedGift.AQB__TotalGift__c}" />
                                    </td>
                                    <td style="text-align:right">
                                        <ui:outputCurrency value="{!v.selectedGift.AQB__PledgeBalanceTotal__c}" />
                                    </td>
                                    <td>
                                        <center><ui:outputCheckbox value="{!v.selectedGift.AQB__Matched__c}"/></center>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <legend class="slds-form-element__label">
                            <span style="font-weight: bold;">Enter Matching Gift Transaction for {!v.newItem.AQB__AccountName__c}</span>
                            <br />
                            <span style="font-weight: bold; color: red">{!v.errorMessage}</span>
                        </legend>
                        <table class="slds-table slds-table--bordered" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Amount</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Designation</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Acknowledgement</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Description</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <force:inputField aura:id="inputAmount6" value="{!v.newItem.AQB__Amount__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__CampaignAppeal__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__ChartOfAccounts__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.batch.AQB__DefaultAcknowledgement__c}" required="true" />
                                    </td>
                                    <td>
                                        <force:inputField value="{!v.newItem.AQB__Description__c}" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <div style="display: none; width=50%" id="tempFieldSetMG">
                            <table class="slds-table slds-table--bordered" style="width=50%;">
                                <tr>
                                    <td style="padding-left: 25%; text-align:right"><span aura:id="mgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style=""><span aura:id="mgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="text-align:right"><span aura:id="mbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="padding-right: 25%;"><span aura:id="mbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
									<!--
                                    <td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>
                                    <td style="padding-left: 5%; width: 5%; text-align:right"><span aura:id="mgDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td style="padding-left: 5%; width: 5%;"><span aura:id="mgDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="padding-left: 5%; width: 5%; text-align:right"><span aura:id="mbbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td style="padding-left: 5%; width: 5%;"><span aura:id="mbbDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
                                	<td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td> -->
                                </tr>
                         	</table>
                            <br />
                        </div>
                        <ui:button label="Save" press="{!c.saveNewTransaction}" />
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            <!-- Matching Gift Payment -->
            <div style="display: none;" id="matchpaymentForm">
                <center>
                    <div aura:id="inputForm" style="overflow: auto;">
                        <legend class="slds-form-element__label">
                            <span style="font-weight: bold;">Enter the Amount and Select the matching gifts below that are to be paid:</span>
                        </legend>
                        <table class="slds-table slds-table--bordered" style="width=50%;">
                            <tr>
                                <td style="padding-left: 20%; width: 10%; text-align:right">Amount:</td>
                                <td style="padding-left: 50px; width: 40%;"><force:inputField aura:id="inputAmount7" value="{!v.newItem.AQB__Amount__c}" required="true" change="{!c.updateRemainingAmount}" /></td>
                                <td style="padding-left: 10%; width: 10%; text-align:right;">Remaining Amount:</td>	
                                <td style="padding-right: 30%; width: 40%; text-align:left; font-weight: bold;"><ui:outputCurrency value="{!v.transactionTotal}" /></td>
                            </tr>
                        </table>
                        <table class="slds-table slds-table--bordered" style="width=100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Post Payment</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Gift #</span></th>
                                    <th scope="col" style="text-align:left"><span class="slds-truncate">Matched Account</span></th>
                                    <th scope="col" style="text-align:left"><span class="slds-truncate">Date</span></th>
                                    <th scope="col" style="text-align:left"><span class="slds-truncate">Fundraising Campaign</span></th>
                                    <th scope="col" style="text-align:right; padding-right: 50px"><span class="slds-truncate">Balance</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.matchingGifts}" var="mg">
                                    <tr>
                                        <td>
                                            <center>
                                                <ui:inputCheckbox text="{!mg.Id}" aura:id="boxPackM" value="false" change="{!c.checkboxSelectM}" />
                                            </center>
                                        </td>
                                        <td style="text-align:center">
                                            <a href="{!'/' + mg.Id}" target="_blank">{!mg.Name}</a>
                                        </td>
                                        <td style="text-align:left">
                                            <a href="{!'/' + mg.AQB__MatchLink__r.AQB__Account__c}" target="_blank">{!mg.AQB__MatchLink__r.AQB__Account__r.Name}</a>
                                        </td>
                                        <td style="text-align:left">
                                            <ui:outputDate value="{!mg.AQB__Date__c}" />
                                        </td>
                                        <td style="text-align:left">
                                            <a href="{!'/' + mg.AQB__CampaignFund__c}" target="blank">{!mg.AQB__CampaignFund__r.Name}</a>
                                        </td>
                                        <td style="text-align:right; padding-right: 50px">
                                            <ui:outputCurrency value="{!mg.AQB__RollUpPledgeBalanceTotal__c}" />
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <ui:button label="Pay checked Matching Gifts" press="{!c.confirmMatchPayment}" />
                        <ui:button label="Cancel" press="{!c.resetForm}" />
                        <br />
                        <br />
                    </div>
                </center>
            </div>
            
        </div>
    </aura:if>
    
    <!-- Add Transactions -->
    <div style="display: none; width=100%" id="transform">
        <center>
            <table class="slds-table slds-table--bordered" style="width:100%;">
                <thead>
                    <tr class="slds-text-heading--label">
                        <th scope="col" style="text-align:center"><span class="slds-truncate">Account</span></th>
                        <th scope="col" style="text-align:center"><span class="slds-truncate">Entry Type</span></th>
                        <th scope="col" style="text-align:center">
                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Planned Gift'}">
                                <span class="slds-truncate">Method</span>
                            </aura:if>
                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Check'}"> 
                                <span class="slds-truncate">Check Number</span>
                                <aura:set attribute="else">
                                    <aura:if isTrue="{!v.newItem.AQB__Method__c == 'ACH' || v.newItem.AQB__Method__c == 'Wire' || v.newItem.AQB__Method__c == 'PayPal' || v.currentMethod == 'Transfer'}"> 
                                        <span class="slds-truncate">Reference</span>
                                        <aura:set attribute="else">
                                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                                <span class="slds-truncate">Property Category</span>
                                            </aura:if>
                                        </aura:set>
                                    </aura:if>
                                </aura:set>
                            </aura:if>
                        </th>
                        <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                        <th scope="col" style="text-align:center"><span class="slds-truncate">Acknowledgement</span></th> 
                        <th scope="col" style="text-align:center"><span class="slds-truncate">Anonymity</span></th> 
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="text-align:center">
                            {!v.currentAccountName}
                        </td>
                        <td style="text-align:center">
                        	{!v.newItem.AQB__Method__c}
                        </td>
                        <td style="text-align:center">
                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Planned Gift'}">
                                {!v.newItem.AQB__PaymentMethod__c}
                            </aura:if>
                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Check'}"> 
                                {!v.newItem.AQB__CheckNumber__c}
                                <aura:set attribute="else">
                                    <aura:if isTrue="{!v.newItem.AQB__Method__c == 'ACH' || v.newItem.AQB__Method__c == 'Wire' || v.newItem.AQB__Method__c == 'PayPal' || v.currentMethod == 'Transfer'}"> 
                                        {!v.newItem.AQB__Reference__c}
                                        <aura:set attribute="else">
                                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                         		{!v.newItem.AQB__Transaction1PropertyCategory__c}
                                            </aura:if>
                                        </aura:set>
                                    </aura:if>
                                </aura:set>
                            </aura:if>
                        </td>
                        <td style="text-align:center">
                            {!v.currentCampaign}
                        </td>
                        <td style="text-align:center">
                            {!v.currentAcknowledgement}
                        </td>
                        <td style="text-align:center">
                            {!v.newItem.AQB__AnonymityLevel__c}
                        </td>
                    </tr>
                </tbody>
            </table>
            <br />
            <table class="slds-table slds-table--bordered" style="width:80%;">
                <thead>
                    <tr class="slds-text-heading--label">
                        <th scope="col" style="text-align:center; width: 10%"><span class="slds-truncate">Transaction #</span></th>
                        <th scope="col" style="text-align:right; width: 10%"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span><span id="tAmountLabel" class="slds-truncate">Amount</span></span></th>
                        <th scope="col" style="text-align:center; width: 35%"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Designation</span></th>
                        <th scope="col" style="text-align:center; width: 45%"><span class="slds-truncate">Description</span></th> 
                        <th scope="col" style="text-align:center;">
                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                <span class="slds-truncate">Property Category</span>
                            </aura:if>
                        </th>
                        <th scope="col" style="text-align:center;">
                            <aura:if isTrue="{!v.batch.AQB__GiftCreditYear__c == true}">
                                <span class="slds-truncate">Gift Credited Date</span>
                            </aura:if>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="text-align:center">
                            1
                        </td>
                        <td style="text-align:right">
                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Securities'}"> 
                                {!v.newItem.AQB__NumberOfShares__c}
                                <aura:set attribute="else">
                            		<ui:outputCurrency value="{!v.newItem.AQB__Amount__c}"/>
                                </aura:set>
                            </aura:if>
                        </td>
                        <td style="text-align:center">
                            {!v.designation1}
                        </td>
                        <td style="text-align:center">
                            {!v.newItem.AQB__Description__c}
                        </td>
                        <td style="text-align:center;">
                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                {!v.newItem.AQB__Transaction1PropertyCategory__c}
                            </aura:if>
                        </td>
                        <td style="text-align:center;">
                            <aura:if isTrue="{!v.batch.AQB__GiftCreditYear__c == true}">
                                {!v.newItem.AQB__CreditedYearOverrideDate__c}
                            </aura:if>
                        </td>
                    </tr>
                    <aura:if isTrue="{!greaterthan(v.transactionNumber, 1)}"> 
                        <tr>
                            <td style="text-align:center">
                                2
                            </td>
                            <td style="text-align:right">
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Securities'}"> 
                                    {!v.newItem.AQB__NumberOfShares2__c}
                                    <aura:set attribute="else">
                                    	<ui:outputCurrency value="{!v.newItem.AQB__Amount2__c}"/>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td style="text-align:center">
                                {!v.designation2}
                            </td>
                            <td style="text-align:center">
                                {!v.newItem.AQB__Description2__c}
                            </td>
                            <td style="text-align:center">
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                    {!v.newItem.AQB__Transaction2PropertyCategory__c}
                                </aura:if>
                            </td>
                            <td style="text-align:center;">
                                <aura:if isTrue="{!v.batch.AQB__GiftCreditYear__c == true}">
                                    {!v.newItem.AQB__CreditedYearOverrideDate2__c}
                                </aura:if>
                            </td>
                        </tr>      
                    </aura:if>
                    <aura:if isTrue="{!greaterthan(v.transactionNumber, 2)}"> 
                        <tr>
                            <td style="text-align:center">
                                3
                            </td>
                            <td style="text-align:right">
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Securities'}"> 
                                    {!v.newItem.AQB__NumberOfShares3__c}
                                    <aura:set attribute="else">
                                    	<ui:outputCurrency value="{!v.newItem.AQB__Amount3__c}"/>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td style="text-align:center">
                                {!v.designation3}
                            </td>
                            <td style="text-align:center">
                                {!v.newItem.AQB__Description3__c}
                            </td>
                            <td style="text-align:center">
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                    {!v.newItem.AQB__Transaction3PropertyCategory__c}
                                </aura:if>
                            </td>
                            <td style="text-align:center;">
                                <aura:if isTrue="{!v.batch.AQB__GiftCreditYear__c == true}">
                                    {!v.newItem.AQB__CreditedYearOverrideDate3__c}
                                </aura:if>
                            </td>
                        </tr>      
                    </aura:if>
                    <aura:if isTrue="{!greaterthan(v.transactionNumber, 3)}"> 
                        <tr>
                            <td style="text-align:center">
                                4
                            </td>
                            <td style="text-align:right">
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Securities'}"> 
                                    {!v.newItem.AQB__NumberOfShares4__c}
                                    <aura:set attribute="else">
                                		<ui:outputCurrency value="{!v.newItem.AQB__Amount4__c}"/>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td style="text-align:center">
                                {!v.designation4}
                            </td>
                            <td style="text-align:center">
                                {!v.newItem.AQB__Description4__c}
                            </td>
                            <td style="text-align:center">
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                    {!v.newItem.AQB__Transaction_4_Property_Category__c}
                                </aura:if>
                            </td>
                            <td style="text-align:center;">
                                <aura:if isTrue="{!v.batch.AQB__GiftCreditYear__c == true}">
                                    {!v.newItem.AQB__CreditedYearOverrideDate4__c}
                                </aura:if>
                            </td>
                        </tr>      
                    </aura:if>
                    <aura:if isTrue="{!greaterthan(v.transactionNumber, 4)}"> 
                        <tr>
                            <td style="text-align:center">
                                5
                            </td>
                            <td style="text-align:right">
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Securities'}"> 
                                    {!v.newItem.AQB__NumberOfShares5__c}
                                    <aura:set attribute="else">
                            			<ui:outputCurrency value="{!v.newItem.AQB__Amount5__c}"/>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td style="text-align:center">
                                {!v.designation5}
                            </td>
                            <td style="text-align:center">
                                {!v.newItem.AQB__Description5__c}
                            </td>
                            <td style="text-align:center">
                                <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Personal Property' || v.newItem.AQB__Method__c == 'Real Property'}"> 
                                    {!v.newItem.AQB__Transaction5PropertyCategory__c}
                                </aura:if>
                            </td>
                            <td style="text-align:center;">
                                <aura:if isTrue="{!v.batch.AQB__GiftCreditYear__c == true}">
                                    {!v.newItem.AQB__CreditedYearOverrideDate5__c}
                                </aura:if>
                            </td>
                        </tr>      
                    </aura:if>
                    <tr>
                        <td style="text-align:center">
                            {!v.transactionNumber + 1}
                        </td>
                        <td style="text-align:right">
                            <span aura:id="tSharesField" class="slds-truncate"><force:inputField value="{!v.newTransaction.AQB__NumberOfShares__c}" required="true" change="{!c.updateTotal}" /></span>
                            <span aura:id="tAmountField" class="slds-truncate"><force:inputField value="{!v.newTransaction.AQB__Amount__c}" required="true" change="{!c.updateTotal}" class="rightside" /></span>
                        </td>
                        <td>
                            <force:inputField value="{!v.batch.AQB__DefaultChartofAccounts__c}" required="true" />
                        </td>
                        <td>
                            <force:inputField value="{!v.newTransaction.AQB__Description__c}" />
                        </td>
                        <td>
                            <span aura:id="tPropertyField"><force:inputField value="{!v.newTransaction.AQB__PropertyCategory__c}" /></span>
                        </td>
                        <td>
                            <span aura:id="tCreditedDateField"><force:inputField value="{!v.newTransaction.AQB__CreditedYearOverrideDate__c}" /></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        </td>
                        <td style="text-align:right; font-weight: bold;">
                            <aura:if isTrue="{!v.newItem.AQB__Method__c == 'Securities'}"> 
                            	Total: &nbsp;&nbsp;&nbsp;{!v.transactionTotal}
                                <aura:set attribute="else">
                                    Total: &nbsp;&nbsp;&nbsp;<ui:outputCurrency value="{!v.transactionTotal}"/>
                                </aura:set>
                            </aura:if>
                        </td>
                        <td>
                        </td>
                        <td>
                        </td>
                    </tr>
                </tbody>
            </table>
            <br />
            <ui:button label="Save" press="{!c.saveAddedTransactions}" />
            <aura:if isTrue="{!v.newItem.AQB__Method__c != 'Securities'}"> 
                <ui:button label="Save and Add Soft Credit" press="{!c.saveAddedTransactionsAddCredit}" />
            </aura:if>
            <aura:if isTrue="{!lessthan(v.transactionNumber, 4)}"> 
                <ui:button label="Add another Transaction" press="{!c.addAnotherTransaction}" />
            </aura:if>
            <ui:button label="Cancel" press="{!c.resetForm}" />
            <br />
            <br />
        </center>
    </div>
    <!-- Additional Pledge Schedule -->
    <div style="display: none;" id="scheduleform">
        <center>
            <div aura:id="inputForm" style="overflow: auto;">
                <table class="slds-table slds-table--bordered" style="width:100%;">
                    <thead>
                        <tr class="slds-text-heading--label">
                            <th scope="col" style="text-align:center"><span class="slds-truncate">Account</span></th>
                            <th scope="col" style="text-align:center"><span class="slds-truncate">Amount</span></th>
                            <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                            <th scope="col" style="text-align:center"><span class="slds-truncate">Designation</span></th>
                            <th scope="col" style="text-align:center"><span class="slds-truncate">Acknowledgement</span></th> 
                            <th scope="col" style="text-align:center"><span class="slds-truncate">Anonymity</span></th> 
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="text-align:center">
                                {!v.currentAccountName}
                            </td>
                            <td style="text-align:center">
                                <ui:outputCurrency value="{!v.itemTotal}"/>
                            </td>
                            <td style="text-align:center">
                                {!v.currentCampaign}
                            </td>
                            <td style="text-align:center">
                                <a href="" style="color: blue; font-weight: bold;" id="{!'2' + v.itemId + '^' + v.currentAccountName + '^' + v.newItem.AQB__Method__c}" onmouseover="{!c.showTransactions}" onmouseout="{!c.cancelPopup}">{!v.designation1}</a>
                            </td>
                            <td style="text-align:center">
                                {!v.currentAcknowledgement}
                            </td>
                            <td style="text-align:center">
                                {!v.newItem.AQB__AnonymityLevel__c}
                            </td>
                        </tr>
                    </tbody>
                </table>
                <br />
                
                <table class="slds-table slds-table--bordered" style="width=50%;">
                    <tr>
                        <td style="padding-left: 20%; width: 10%; text-align:right"><span id="apScheduleLabel" class="slds-truncate">Pledge Schedule Type:</span></td>
                        <td style="padding-left: 50px; width: 40%;"><force:inputField value="{!v.extra.AQB__PledgeScheduleType__c}" change="{!c.updateExtraForm}" /></td>
                        <td style="padding-left: 10%; width: 10%; text-align:right;">&nbsp;&nbsp;</td>	
                        <td style="padding-right: 30%; width: 40%; text-align:left;">&nbsp;&nbsp;</td>
                    </tr>
                </table>
                <div style="display: none;" id="scheduleform2">
                    <table class="slds-table slds-table--bordered" style="width=100%;">
                        <thead>
                            <tr class="slds-text-heading--label">
                                <th scope="col" style="text-align:center"><span style="font-weight: bold; color: red">*</span><span id="eAmountLabel" class="slds-truncate">Total Pledge</span></th>
                                <th scope="col" style="text-align:center"><span aura:id="ePaymentLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span># of Payments</span></th>
                                <th scope="col" style="text-align:center"><span aura:id="eFrequencyLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Paid Every</span></th>
                                <th scope="col" style="text-align:center"><span aura:id="eIntervalLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Interval</span></th>
                                <th scope="col" style="text-align:center"><span id="eDueLabel" class="slds-truncate"><span style="font-weight: bold; color: red">*</span>1st Payment Due</span></th>
                                <th scope="col" style="text-align:center"><span aura:id="eEndDateLabel" class="slds-truncate">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: red">*</span>Ending By&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate"><span style="font-weight: bold; color: red">*</span>Pledge Type</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Bill?</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold; color: red">*</span>Designation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
                                <th scope="col" style="text-align:center"><span class="slds-truncate">Description</span></th> 
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <force:inputField aura:id="einputAmount8" value="{!v.extra.AQB__Amount__c}" required="true" />
                                </td>
                                <td>
                                    <span aura:id="ePaymentField"><force:inputField value="{!v.extra.AQB__NumberOfPayments__c}" required="true" change="{!c.resetPayments}" /></span>
                                </td>
                                <td>
                                    <span aura:id="eFrequencyField"><force:inputField value="{!v.extra.AQB__Frequency__c}" required="true" change="{!c.resetPayments}" /></span>
                                </td>
                                <td>
                                    <span aura:id="eIntervalField"><force:inputField value="{!v.extra.AQB__PledgeInterval__c}" change="{!c.resetPayments}" /></span>
                                </td>
                                <td>
                                    <force:inputField aura:id="epledgeStartDate" value="{!v.extra.AQB__PledgeStartDate__c}" required="true" change="{!c.resetPayments}" />
                                </td>
                                <td>
                                    <span aura:id="eEndDateField"><force:inputField aura:id="epledgeEndDate" value="{!v.extra.AQB__PledgeEndDate__c}" required="true" change="{!c.resetPayments}" /></span>
                                </td>
                                <td>
                                    <force:inputField value="{!v.extra.AQB__PledgeStipulation__c}" />
                                </td>
                                <td>
                                    <center><force:inputField value="{!v.extra.AQB__SendPledgeReminder__c}" /></center>
                                </td>
                                <td>
                                    <force:inputField value="{!v.batch.AQB__DefaultChartofAccounts__c}" required="true" />
                                </td>
                                <td>
                                    <force:inputField value="{!v.extra.AQB__Description__c}" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <br />
                    <div style="display: none; width=50%" id="tempFieldSetP2">
                        <table class="slds-table slds-table--bordered" style="width=50%;">
                            <tr>
                                <td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>
                                <td style="padding-left: 10%; width: 10%; text-align:right">&nbsp;&nbsp;</td>
                                <td style="padding-left: 50px; width: 20%;">&nbsp;&nbsp;</td>
                                <td style="padding-left: 10%; width: 10%; text-align:right"><span aura:id="p2bbDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                <td style="padding-left: 50px; width: 20%;"><span aura:id="p2bbDateField"><force:inputField value="{!v.extra.AQB__CreditedYearOverrideDate__c}" /></span></td>
                                <td style="padding-left: 10%; width: 20%; text-align:right">&nbsp;&nbsp;</td>
                            </tr>
                        </table>
                        <br />
                    </div>
                    <br />
                    <aura:if isTrue="{!v.gotPayments == true}">  
                        <legend class="slds-form-element__label">
                            <span style="font-weight: bold; color: blue;">{!v.scheduleDetail}</span>
                        </legend>
                        <table class="slds-table slds-table--bordered" style="width:50%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Payment #</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Due Date</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Amount</span></th>
                                    <aura:if isTrue="{!v.batch.AQB__DefaultCurrency__c != null}">
                                        <th scope="col" style="text-align:center"><span class="slds-truncate">Currency</span></th> 
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Units</span></th> 
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Exchange Rate</span></th> 
                                    </aura:if>
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.payments}" var="payment">
                                    <tr>
                                        <td style="text-align:center">
                                            {!payment.AQB__PaymentNumber__c}
                                        </td>
                                        <td style="text-align:center">
                                            {!payment.AQB__DateDue__c}
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!payment.AQB__Amount__c}"/>
                                        </td>
                                        <aura:if isTrue="{!v.batch.AQB__DefaultCurrency__c != null}">
                                            <td style="text-align:center">
                                                {!v.currency}
                                            </td>
                                            <td style="text-align:right">
                                                {!payment.AQB__CurrencyUnits__c}
                                            </td>
                                            <td style="text-align:right">
                                                {!payment.AQB__CurrencyExchangeRate__c}
                                            </td>
                                        </aura:if>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <ui:button label="Save" press="{!c.saveNewSchedule}" />
                        <ui:button label="Save and Add a Payment" press="{!c.addPayment}" />
                        <ui:button label="Save and Add New Schedule" press="{!c.addNewSchedule}" />
                        <ui:button label="Save and Add Soft Credit" press="{!c.saveAddCredit2}" />
                            <ui:button label="Cancel" press="{!c.resetForm}" />
                        <aura:set attribute="else">
                            <ui:button label="Calculate Payments" press="{!c.calculateAdditionalPayments}" />
                            <ui:button label="Cancel" press="{!c.resetForm}" />
                        </aura:set>
                    </aura:if>
                </div>
                <br />
                <br />
            </div>
        </center>
    </div>
            
    <!-- Close Information -->
    <aura:if isTrue="{!v.closeStep == 4}">
        <div class="slds-card">
            <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The batch close process has been started.&nbsp;&nbsp;You will receive an email when the process is complete.<br /></span>
            <br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <ui:button label="    OK    " press="{!c.cancelClose}"/>
            <br/><br/>
        </div>
    </aura:if>
    <aura:if isTrue="{!v.closeStep == 3}">
        <div class="slds-card"> 
            <aura:if isTrue="{!v.batch.RecordType.Name == 'Closed Batch'}">
                <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This batch is closed.
                    <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Press Cancel to return to the Batch.<br />
                </span>
                <br/>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <aura:set attribute="else">
                    <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You are about to close this batch.&nbsp;&nbsp;<span style="color: red;">You cannot reopen a closed batch.</span><br />
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Press 'Confirm Close' to continue or Cancel to return to the Batch.<br />
                    </span>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <ui:button label="Confirm Close" press="{!c.confirmClose}"/>&nbsp;&nbsp;&nbsp;
                </aura:set>
            </aura:if>
            <ui:button label="Cancel" press="{!c.cancelClose}"/>
            <br/><br/>
        </div>
    </aura:if>
    <aura:if isTrue="{!v.closeError1 != ''}"> 
        <div class="slds-card">
            <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span style="color: red;">This batch cannot be closed.</span><br />
            	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{!v.closeError1}<br />
                <aura:if isTrue="{!v.closeError2 != ''}"> 
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{!v.closeError2}<br />
                </aura:if>
                <aura:if isTrue="{!v.closeError3 != ''}"> 
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{!v.closeError3}<br />
                </aura:if>
                <br />
        	</span>
        	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <ui:button label="Go to Batch Items" aura:id="displayBatchItems" press="{!c.callBatchItems}" />
            <br /><br />
        </div>
    </aura:if>
    <aura:if isTrue="{!v.closeStep == 1}"> 
        <div class="slds-card"> 
            <span style="font-weight: bold;">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="/resource/AQB__RedExclaimation" height="16" width="16" style="vertical-align:top" /> Accounts must specified and any <span style="color: red; font-weight: bold;">Missing</span> Campaign Appeals or Designations must specifed. &nbsp;&nbsp;
               	<img src="/resource/AQB__RedExclaimation" height="16" width="16" style="vertical-align:top" /> Contacts on Tributes must specified.&nbsp;&nbsp;
                <aura:if isTrue="{!v.batch.AQB__Outstanding_Pledge_Indicator__c == 'Require to be cleared'}"> 
                    <img src="/resource/AQB__YellowExclaimation" height="16" width="16" style="vertical-align:top" /> Pledges must be cleared.&nbsp;&nbsp;
                </aura:if>
                <aura:if isTrue="{!v.batch.AQB__OpenRecurringGiftIndicator__c == 'Require to be cleared'}"> 
                    <img src="/resource/AQB__YellowExclaimation" height="16" width="16" style="vertical-align:top" /> Recurring Gifts must be cleared.&nbsp;&nbsp;
                </aura:if>
                <aura:if isTrue="{!v.batch.AQB__Open_Opportunity_Indicator__c == 'Require to be cleared'}"> 
                    <img src="/resource/AQB__YellowExclaimation" height="16" width="16" style="vertical-align:top" /> Opportunities must be cleared.
                </aura:if>
            </span>
        </div>
    </aura:if>
    
    <!-- Batch Items List -->
    <aura:if isTrue="{!v.close == False || v.closeStep == 1}"> 
        <div class="slds-card">
            <legend class="slds-form-element__label slds-text-title--caps">
                <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Batch Items
                    <aura:if isTrue="{!v.close == True}"> that need to be cleared before the Batch can be closed.
                    </aura:if>
                </span>
            </legend>    
            <table class="slds-table slds-table--bordered slds-table--striped slds-table--cell-buffer">
                <thead>
                    <tr class="slds-text-heading--label">
                        <th scope="col"><span class="slds-truncate">Action</span></th>
                        <th scope="col"><span class="slds-truncate">&nbsp;</span></th>
                        <th scope="col"><span class="slds-truncate"><a href="" id="Account" style="color: blue" onclick="{!c.sortItems}">Account</a></span></th>
                        <th scope="col"><span class="slds-truncate"><a href="" id="Method" style="color: blue" onclick="{!c.sortItems}">Method</a></span></th> 
                        <th scope="col" style="text-align:right"><span class="slds-truncate"><a href="" id="Amount" style="color: blue" onclick="{!c.sortItems}">Amount</a></span></th>
                        <th scope="col"><span class="slds-truncate">&nbsp;R&nbsp;&nbsp;&nbsp;&nbsp;P&nbsp;&nbsp;&nbsp;&nbsp;O&nbsp;&nbsp;&nbsp;&nbsp;C</span></th>
                        <th scope="col"><span class="slds-truncate"><a href="" id="CampaignAppeal" style="color: blue" onclick="{!c.sortItems}">Campaign Appeal</a></span></th> 
                        <th scope="col"><span class="slds-truncate"><a href="" id="Designation" style="color: blue" onclick="{!c.sortItems}">Designation</a></span></th> 
                        <th scope="col"><span class="slds-truncate"><a href="" id="Acknowledgement" style="color: blue" onclick="{!c.sortItems}">Acknowledgement</a></span></th> 
                        <th scope="col"><span class="slds-truncate"><a href="" id="Anonymity" style="color: blue" onclick="{!c.sortItems}">Anonymity</a></span></th> 
                        <th scope="col"><span class="slds-truncate">Q&nbsp;&nbsp;&nbsp;&nbsp;T&nbsp;&nbsp;&nbsp;&nbsp;R</span></th> 
                        <th scope="col" style="text-align:center"><span class="slds-truncate">Files</span></th>
                    </tr>
                </thead>
                <tbody>
                    <aura:iteration items="{!v.batchItems}" var="item">
                        <tr>
                            <td>
                                <a href="{!'/' + item.Id}" target="_blank" style="color: blue">View</a>&nbsp;|&nbsp;
                                <!--<a href="{!'/' + item.Id + '/e'}" target="_blank" style="color: blue">Edit</a>&nbsp;|&nbsp;-->
                                <a href="" id="{!item.Id + '^BatchItem'}" style="color: blue" onclick="{!c.editItem}">Edit</a>&nbsp;|&nbsp;
                                <a href="" id="{!item.Id + '^' + item.AQB__AccountName__c}" style="color: blue" onclick="{!c.confirmDeleteBatchItem}">Delete</a>
                            </td>
                            <td>
                                <aura:if isTrue="{!item.AQB__AccountMatchIndicator__c == 'Create New Account'}"> 
                                    <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!'X' + item.Id + '^' + item.AQB__Account__c}" onmouseover="{!c.showAccountMatches}" onmouseout="{!c.cancelPopup}" />
                                    <aura:set attribute="else">
                                        <aura:if isTrue="{!item.AQB__AccountMatchIndicator__c == 'User Selected Account'}"> 
                                            <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!'U' + item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__Account__r.Name}" onmouseover="{!c.showAccountMatches}" onmouseout="{!c.cancelPopup}" />
                                            <aura:set attribute="else">
                                                <aura:if isTrue="{!item.AQB__AccountMatchIndicator__c == 'User Selected Potential Account Match'}"> 
                                                    <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!'F' + item.Id + '^' + item.AQB__Account__c}" onmouseover="{!c.showAccountMatches}" onmouseout="{!c.cancelPopup}" />
                                                    <aura:set attribute="else">
                                                        <aura:if isTrue="{!item.AQB__Account__c != null}"> 
                                                            <img src="/resource/AQB__NoInformation" height="16" width="16"/>
                                                            <aura:set attribute="else">
                                                                <img src="/resource/AQB__RedExclaimation" height="16" width="16" id="{!'Y' + item.Id + '^' + item.AQB__Account__c}" onmouseover="{!c.showAccountMatches}" onmouseout="{!c.cancelPopup}" />
                                                            </aura:set>
                                                        </aura:if>
                                                    </aura:set>
                                                </aura:if>
                                            </aura:set>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td>
                                <aura:if isTrue="{!item.AQB__Account__c != Null}"> 
                                    <a href="{!'/' + item.AQB__Account__c}" target="_blank">{!item.AQB__Account__r.Name}</a>
                                    <!--<force:outputField aura:id="accountLookupOutput" value="{!item.AQB__Account__r.Name}" class="slds-hide"></force:outputField>-->
                                    <aura:set attribute="else">
                                        {!item.AQB__AccountName__c}
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td>
                                <aura:if isTrue="{!item.AQB__BatchItemMultiMethods__c == True}"> 
                                    <a href="" style="color: green; font-weight: bold;" id="{!'3' + item.Id + '^' + item.AQB__AccountName__c + '^' + item.AQB__Method__c}" onmouseover="{!c.showTransactions}" onmouseout="{!c.cancelPopup}">Multiple</a>
                                    <aura:set attribute="else">
                                        {!item.AQB__Method__c}
                                        <aura:if isTrue="{!and(item.AQB__Gift__c != null, item.AQB__Method__c == item.AQB__PaymentMethod__c)}"> (AT) 
                                        </aura:if>
                                        <aura:if isTrue="{!item.AQB__Method__c == 'Pledge' || item.AQB__Method__c == 'Grant'}"> 
                                            <aura:if isTrue="{!item.AQB__PledgeType__c == 'Conditional'}"> (C)
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!item.AQB__PledgeType__c == 'Unconditional'}"> (U)
                                                        <aura:set attribute="else">
                                                            <aura:if isTrue="{!item.AQB__PledgeType__c == 'Statement of Intent'}"> (V)
                                                            </aura:if>
                                                        </aura:set>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                            <aura:if isTrue="{!greaterthan(item.AQB__PledgePaymentTotal__c, 0)}"> 
                                                <span title="{!'$' + item.AQB__PledgePaymentTotal__c}" style="color: green; font-weight: bold;">($)</span>
                                            </aura:if>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td style="text-align:right">
                                <ui:outputCurrency value="{!item.AQB__Total_Amount__c}"/>
                            </td>
                            <td>
                                <aura:if isTrue="{!item.AQB__RecurringGiftLinkIndicator__c == 'To be Created'}">
                                    <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__r.Name}" onmouseover="{!c.showNewRecurringGift}" onmouseout="{!c.cancelPopup}" />
                                    <aura:set attribute="else">
                                        <aura:if isTrue="{!item.AQB__LinkToRecurringGift__c != null}"> 
                                            <aura:if isTrue="{!item.AQB__RecurringGiftLinkIndicator__c == 'Auto Matched via the Selected Pledge' || item.AQB__PledgeLinkIndicator__c == 'Auto Matched via the Selected Recurring Gift'}">
                                                <aura:if isTrue="{!item.AQB__RecurringGiftLinkIndicator__c == 'Integration Selected'}"> 
                                                    <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToRecurringGift__c + '^' + item.AQB__Account__r.Name + '^Integration^Auto'}" onmouseover="{!c.showRecurringGiftLink}" onmouseout="{!c.cancelPopup}" />
                                                    <aura:set attribute="else">
                                                        <aura:if isTrue="{!item.AQB__RecurringGiftLinkIndicator__c == 'User Selected'}"> 
                                                            <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToRecurringGift__c + '^' + item.AQB__Account__r.Name + '^User^Auto'}" onmouseover="{!c.showRecurringGiftLink}" onmouseout="{!c.cancelPopup}" />
                                                            <aura:set attribute="else">
                                                                <aura:if isTrue="{!item.AQB__RecurringGiftLinkVerified__c == True}"> 
                                                                    <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToRecurringGift__c + '^' + item.AQB__Account__r.Name + '^System^Auto'}" onmouseover="{!c.showRecurringGiftLink}" onmouseout="{!c.cancelPopup}" />
                                                                    <aura:set attribute="else">
                                                                        <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToRecurringGift__c + '^' + item.AQB__Account__r.Name + '^System^Auto'}" onmouseover="{!c.showRecurringGiftLink}" onmouseout="{!c.cancelPopup}" />
                                                                    </aura:set>
                                                                </aura:if>
                                                            </aura:set>
                                                        </aura:if>
                                                    </aura:set>
                                                </aura:if>
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!item.AQB__RecurringGiftLinkIndicator__c == 'Integration Selected'}"> 
                                                        <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToRecurringGift__c + '^' + item.AQB__Account__r.Name + '^Integration^'}" onmouseover="{!c.showRecurringGiftLink}" onmouseout="{!c.cancelPopup}" />
                                                        <aura:set attribute="else">
                                                            <aura:if isTrue="{!item.AQB__RecurringGiftLinkIndicator__c == 'User Selected'}"> 
                                                                <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToRecurringGift__c + '^' + item.AQB__Account__r.Name + '^User^'}" onmouseover="{!c.showRecurringGiftLink}" onmouseout="{!c.cancelPopup}" />
                                                                <aura:set attribute="else">
                                                                    <aura:if isTrue="{!item.AQB__RecurringGiftLinkVerified__c == True}"> 
                                                                        <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToRecurringGift__c + '^' + item.AQB__Account__r.Name + '^System^'}" onmouseover="{!c.showRecurringGiftLink}" onmouseout="{!c.cancelPopup}" />
                                                                        <aura:set attribute="else">
                                                                            <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToRecurringGift__c + '^' + item.AQB__Account__r.Name + '^System^'}" onmouseover="{!c.showRecurringGiftLink}" onmouseout="{!c.cancelPopup}" />
                                                                        </aura:set>
                                                                    </aura:if>
                                                                </aura:set>
                                                            </aura:if>
                                                        </aura:set>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                            <aura:set attribute="else">
                                                <aura:if isTrue="{!item.AQB__RecurringGiftLinkIndicator__c == 'Do Not Link Recurring Gift'}"> 
                                                    <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__Account__r.Name + '^' + 'DoNotLink'}" onmouseover="{!c.showRecurringGifts}" onmouseout="{!c.cancelPopup}" />    
                                                    <aura:set attribute="else">
                                                        <aura:if isTrue="{!item.AQB__NumberOfRecurringGifts__c == 1}"> 
                                                            <aura:if isTrue="{!item.AQB__LinkToPledge__c != null || item.AQB__LinkToOpportunity__c != null}"> 
                                                                <img src="/resource/AQB__YellowExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__Account__r.Name + '^' + 'AlreadyLinked'}" onmouseover="{!c.showRecurringGifts}" onmouseout="{!c.cancelPopup}" />
                                                                <aura:set attribute="else">
                                                                    <img src="/resource/AQB__YellowExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__Account__r.Name + '^' + 'NoLink'}" onmouseover="{!c.showRecurringGifts}" onmouseout="{!c.cancelPopup}" />
                                                                </aura:set>
                                                            </aura:if>
                                                            <aura:set attribute="else">
                                                                <aura:if isTrue="{!greaterthan(item.AQB__NumberOfRecurringGifts__c, 1)}"> 
                                                                    <aura:if isTrue="{!item.AQB__LinkToPledge__c != null || item.AQB__LinkToOpportunity__c != null}"> 
                                                                        <img src="/resource/AQB__OrangeExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__Account__r.Name + '^' + 'AlreadyLinked'}" onmouseover="{!c.showRecurringGifts}" onmouseout="{!c.cancelPopup}" />
                                                                        <aura:set attribute="else">
                                                                            <img src="/resource/AQB__OrangeExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__Account__r.Name + '^' + 'NoLink'}" onmouseover="{!c.showRecurringGifts}" onmouseout="{!c.cancelPopup}" />
                                                                        </aura:set>
                                                                    </aura:if>
                                                                    <aura:set attribute="else">
                                                                        <img src="/resource/AQB__NoInformation" height="16" width="16"/>
                                                                    </aura:set>
                                                                </aura:if>
                                                            </aura:set>
                                                        </aura:if>
                                                    </aura:set>
                                                </aura:if>
                                            </aura:set>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                                &nbsp;
                                <aura:if isTrue="{!item.AQB__LinkToPledge__c != null}"> 
                                    <aura:if isTrue="{!item.AQB__RecurringGiftLinkIndicator__c == 'Auto Matched via the Selected Pledge' || item.AQB__PledgeLinkIndicator__c == 'Auto Matched via the Selected Recurring Gift'}">
                                        <aura:if isTrue="{!item.AQB__PledgeLinkIndicator__c == 'Integration Selected'}"> 
                                            <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToPledge__c + '^' + item.AQB__Account__r.Name + '^Integration^Auto'}" onmouseover="{!c.showPledgeLink}" onmouseout="{!c.cancelPopup}" />
                                            <aura:set attribute="else">
                                                <aura:if isTrue="{!item.AQB__PledgeLinkIndicator__c == 'User Selected' || item.AQB__PledgeLinkIndicator__c == 'Matched via the Selected Recurring Gift'}"> 
                                                    <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToPledge__c + '^' + item.AQB__Account__r.Name + '^User^Auto'}" onmouseover="{!c.showPledgeLink}" onmouseout="{!c.cancelPopup}" />
                                                    <aura:set attribute="else">
                                                        <aura:if isTrue="{!item.AQB__PledgeLinkVerified__c == True}"> 
                                                            <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToPledge__c + '^' + item.AQB__Account__r.Name + '^System^Auto'}" onmouseover="{!c.showPledgeLink}" onmouseout="{!c.cancelPopup}" />
                                                            <aura:set attribute="else">
                                                                <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToPledge__c + '^' + item.AQB__Account__r.Name + '^System^Auto'}" onmouseover="{!c.showPledgeLink}" onmouseout="{!c.cancelPopup}" />
                                                            </aura:set>
                                                        </aura:if>
                                                    </aura:set>
                                                </aura:if>
                                            </aura:set>
                                        </aura:if>
                                        <aura:set attribute="else">
                                            <aura:if isTrue="{!item.AQB__PledgeLinkIndicator__c == 'Integration Selected'}"> 
                                                <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToPledge__c + '^' + item.AQB__Account__r.Name + '^Integration^'}" onmouseover="{!c.showPledgeLink}" onmouseout="{!c.cancelPopup}" />
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!item.AQB__PledgeLinkIndicator__c == 'User Selected' || item.AQB__PledgeLinkIndicator__c == 'Matched via the Selected Recurring Gift'}"> 
                                                        <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToPledge__c + '^' + item.AQB__Account__r.Name + '^User^'}" onmouseover="{!c.showPledgeLink}" onmouseout="{!c.cancelPopup}" />
                                                        <aura:set attribute="else">
                                                            <aura:if isTrue="{!item.AQB__PledgeLinkIndicator__c == 'User Selected - Multiple'}"> 
                                                                <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__r.Name}" onmouseover="{!c.showMultiplePledgeLink}" onmouseout="{!c.cancelPopup}" />
                                                                <aura:set attribute="else">
                                                                    <aura:if isTrue="{!item.AQB__PledgeLinkVerified__c == True}">
                                                                        <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToPledge__c + '^' + item.AQB__Account__r.Name + '^System^'}" onmouseover="{!c.showPledgeLink}" onmouseout="{!c.cancelPopup}" />
                                                                        <aura:set attribute="else">
                                                                            <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToPledge__c + '^' + item.AQB__Account__r.Name + '^System^'}" onmouseover="{!c.showPledgeLink}" onmouseout="{!c.cancelPopup}" />
                                                                        </aura:set>
                                                                    </aura:if>
                                                                </aura:set>
                                                            </aura:if>
                                                        </aura:set>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </aura:set>
                                    </aura:if>
                                    <aura:set attribute="else">									
                                        <aura:if isTrue="{!item.AQB__PledgeLinkIndicator__c == 'Do Not Link Pledge'}"> 
                                            <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^' + 'DoNotLink'}" onmouseover="{!c.showOpenPledges}" onmouseout="{!c.cancelPopup}" />    
                                            <aura:set attribute="else">
                                                <aura:if isTrue="{!item.AQB__NumberOfOpenPledges__c == 1}"> 
                                                    <aura:if isTrue="{!item.AQB__LinkToRecurringGift__c != null || item.AQB__LinkToOpportunity__c != null}"> 
                                                        <img src="/resource/AQB__YellowExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^' + 'AlreadyLinked'}" onmouseover="{!c.showOpenPledges}" onmouseout="{!c.cancelPopup}" />
                                                        <aura:set attribute="else">
                                                            <img src="/resource/AQB__YellowExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^' + 'NoLink'}" onmouseover="{!c.showOpenPledges}" onmouseout="{!c.cancelPopup}" />
                                                        </aura:set>
                                                    </aura:if>
                                                    <aura:set attribute="else">
                                                        <aura:if isTrue="{!greaterthan(item.AQB__NumberOfOpenPledges__c, 1)}"> 
                                                            <aura:if isTrue="{!item.AQB__LinkToRecurringGift__c != null || item.AQB__LinkToOpportunity__c != null}"> 
                                                                <img src="/resource/AQB__OrangeExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^' + 'AlreadyLinked'}" onmouseover="{!c.showOpenPledges}" onmouseout="{!c.cancelPopup}" />
                                                                <aura:set attribute="else">
                                                                    <img src="/resource/AQB__OrangeExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^' + 'NoLink'}" onmouseover="{!c.showOpenPledges}" onmouseout="{!c.cancelPopup}" />
                                                                </aura:set>
                                                            </aura:if>
                                                            <aura:set attribute="else">
                                                                <img src="/resource/AQB__NoInformation" height="16" width="16"/>
                                                            </aura:set>
                                                        </aura:if>
                                                    </aura:set>
                                                </aura:if>
                                            </aura:set>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                                &nbsp;
                                <aura:if isTrue="{!item.AQB__LinkToOpportunity__c != null}"> 
                                    <aura:if isTrue="{!item.AQB__OpportunityLinkIndicator__c == 'Integration Selected'}"> 
                                        <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToOpportunity__c + '^' + item.AQB__AccountName__c + '^Integration'}" onmouseover="{!c.showOpportunityLink}" onmouseout="{!c.cancelPopup}" />
                                        <aura:set attribute="else">
                                            <aura:if isTrue="{!item.AQB__OpportunityLinkIndicator__c == 'User Selected'}"> 
                                                <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToOpportunity__c + '^' + item.AQB__AccountName__c + '^User'}" onmouseover="{!c.showOpportunityLink}" onmouseout="{!c.cancelPopup}" />
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!item.AQB__OpportunityLinkVerified__c == True}">
                                                        <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToOpportunity__c + '^' + item.AQB__AccountName__c + '^System'}" onmouseover="{!c.showOpportunityLink}" onmouseout="{!c.cancelPopup}" />
                                                        <aura:set attribute="else">
                                                            <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__LinkToOpportunity__c + '^' + item.AQB__AccountName__c + '^System'}" onmouseover="{!c.showOpportunityLink}" onmouseout="{!c.cancelPopup}" />
                                                        </aura:set>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </aura:set>
                                    </aura:if>
                                    <aura:set attribute="else">
                                        <aura:if isTrue="{!item.AQB__OpportunityLinkIndicator__c == 'Do Not Link Opportunity'}"> 
                                            <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^' + 'DoNotLink'}" onmouseover="{!c.showOpenOpportunities}" onmouseout="{!c.cancelPopup}" />    
                                            <aura:set attribute="else">
                                                <aura:if isTrue="{!item.AQB__NumberOfOpenOpportunities__c == 1}"> 
                                                    <aura:if isTrue="{!item.AQB__LinkToPledge__c != null || item.AQB__LinkToRecurringGift__c != null}"> 
                                                        <img src="/resource/AQB__YellowExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^AlreadyLinked'}" onmouseover="{!c.showOpenOpportunities}" onmouseout="{!c.cancelPopup}" />
                                                        <aura:set attribute="else">
                                                            <img src="/resource/AQB__YellowExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^' + 'NoLink'}" onmouseover="{!c.showOpenOpportunities}" onmouseout="{!c.cancelPopup}" />
                                                        </aura:set>
                                                    </aura:if>
                                                    <aura:set attribute="else">
                                                        <aura:if isTrue="{!greaterthan(item.AQB__NumberOfOpenOpportunities__c, 1)}"> 
                                                            <aura:if isTrue="{!item.AQB__LinkToPledge__c != null || item.AQB__LinkToRecurringGift__c != null}"> 
                                                                <img src="/resource/AQB__OrangeExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^AlreadyLinked'}" onmouseover="{!c.showOpenOpportunities}" onmouseout="{!c.cancelPopup}" />
                                                                <aura:set attribute="else">
                                                                    <img src="/resource/AQB__OrangeExclaimation" height="16" width="16" id="{!item.Id + '^' + item.AQB__Account__c + '^' + item.AQB__AccountName__c + '^' + 'NoLink'}" onmouseover="{!c.showOpenOpportunities}" onmouseout="{!c.cancelPopup}" />
                                                                </aura:set>
                                                            </aura:if>
                                                            <aura:set attribute="else">
                                                                <img src="/resource/AQB__NoInformation" height="16" width="16"/>
                                                            </aura:set>
                                                        </aura:if>
                                                    </aura:set>
                                                </aura:if>
                                            </aura:set>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                                &nbsp;
                                <aura:if isTrue="{!item.AQB__NumberOfCredits__c != 0}"> 
                                    <aura:if isTrue="{!item.AQB__NumberOfSoftCreditsNotVerified__c == 0}">
                                        <img src="/resource/AQB__GreenInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__AccountName__c + '^' + item.AQB__Total_Amount__c}" onmouseover="{!c.verifySoftCredits}" onmouseout="{!c.cancelPopup}" />
                                        <aura:set attribute="else">
                                            <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!item.Id + '^' + item.AQB__AccountName__c + '^' + item.AQB__Total_Amount__c}" onmouseover="{!c.verifySoftCredits}" onmouseout="{!c.cancelPopup}" />
                                        </aura:set>
                                    </aura:if>
                                    <aura:set attribute="else">
                                        <img src="/resource/AQB__NoInformation" height="16" width="16"/>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td>
                                <aura:if isTrue="{!item.AQB__CampaignAppeal__c == Null}"> 
                                    <a href="" style="color: red; font-weight: bold;" id="{!'1' + item.Id + '^' + item.AQB__AccountName__c}" onmouseover="{!c.showCampaign}" onmouseout="{!c.cancelPopup}">Missing</a>
                                    <aura:set attribute="else">
                                        <aura:if isTrue="{!item.AQB__BatchItemMultiCampaignAppeals__c == True}"> 
                                            <span style="color: green; font-weight: bold;">Multiple</span>
                                            <aura:set attribute="else">
                                           		<a href="{!'/' + item.AQB__CampaignAppeal__c}" target="_blank">{!item.AQB__CampaignAppeal__r.Name}</a>
                                            </aura:set>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td>
                                <aura:if isTrue="{!greaterthan(item.AQB__NumberOfMissingDesignations__c, 0)}"> 
                                    <a href="" style="color: red; font-weight: bold;" id="{!'2' + item.Id + '^' + item.AQB__AccountName__c + '^' + item.AQB__Method__c}" onmouseover="{!c.showTransactions}" onmouseout="{!c.cancelPopup}">Missing</a>
                                    <aura:set attribute="else">
                                        <aura:if isTrue="{!item.AQB__BatchItemMultiDesignations__c == True}"> 
                                            <a href="" style="color: green; font-weight: bold;" id="{!'2' + item.Id + '^' + item.AQB__AccountName__c + '^' + item.AQB__Method__c}" onmouseover="{!c.showTransactions}" onmouseout="{!c.cancelPopup}">Multiple</a>
                                            <aura:set attribute="else">
                                                <a href="" style="color: blue; font-weight: bold;" id="{!'2' + item.Id + '^' + item.AQB__AccountName__c + '^' + item.AQB__Method__c}" onmouseover="{!c.showTransactions}" onmouseout="{!c.cancelPopup}">{!item.AQB__ChartOfAccounts__r.Name}</a>
                                            </aura:set>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td>
                                <aura:if isTrue="{!item.AQB__BatchItemMultiAcknowledgements__c == True}"> 
                                    <a href="" style="color: green; font-weight: bold;" id="{!'4' + item.Id + '^' + item.AQB__AccountName__c + '^' + item.AQB__Method__c}" onmouseover="{!c.showTransactions}" onmouseout="{!c.cancelPopup}">Multiple</a>
                                    <aura:set attribute="else">
                                	    <a href="" style="color: blue; font-weight: bold;" id="{!'4' + item.Id + '^' + item.AQB__AccountName__c + '^' + item.AQB__Method__c}" onmouseover="{!c.showTransactions}" onmouseout="{!c.cancelPopup}">{!item.AQB__Acknowledgement__r.Name}</a>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td>
                                <aura:if isTrue="{!item.AQB__AnonymityLevel__c == 'Unknown Anonymous Donor'}"> 
                                    Unknown Donor
                                </aura:if>
                                <aura:if isTrue="{!item.AQB__AnonymityLevel__c == 'Totally Anonymous'}"> 
                                    Totally
                                </aura:if>
                                <aura:if isTrue="{!item.AQB__AnonymityLevel__c == 'Partially Anonymous'}"> 
                                    Partially
                                </aura:if>
                            </td>
                            <td>
                                <!-- Remove Match Potentials from Display
                                <aura:if isTrue="{!greaterthan(item.AQB__BatchItemMatchPotentialCount__c, 0)}"> 
                                    <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!'M' + item.Id + '^' + item.AQB__Account__r.Name}" onmouseover="{!c.showMatches}" onmouseout="{!c.cancelPopup}" />
                                    <aura:set attribute="else">
                                        <img src="/resource/AQB__NoInformation" height="16" width="16" />
                                    </aura:set>
                                </aura:if>
                             	&nbsp; -->
                                <aura:if isTrue="{!greaterthan(item.AQB__BatchItemActivityCount__c, 0)}"> 
                                    <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!'Q' + item.Id + '^' + item.AQB__Account__r.Name}" onmouseover="{!c.showQuids}" onmouseout="{!c.cancelPopup}" />
                                    <aura:set attribute="else">
                                        <img src="/resource/AQB__NoInformation" height="16" width="16"/>
                                    </aura:set>
                                </aura:if>
                                &nbsp;
                                <aura:if isTrue="{!greaterthan(item.AQB__NumberOfMissingTributeContacts__c, 0)}"> 
                                    <img src="/resource/AQB__RedExclaimation" height="16" width="16" id="{!'T' + item.Id + '^' + item.AQB__AccountName__c}" onmouseover="{!c.showTributes}" onmouseout="{!c.cancelPopup}" />
                                    <aura:set attribute="else">
                                        <aura:if isTrue="{!greaterthan(item.AQB__BatchItemTributeCount__c, 0)}"> 
                                            <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!'T' + item.Id + '^' + item.AQB__AccountName__c}" onmouseover="{!c.showTributes}" onmouseout="{!c.cancelPopup}" />
                                            <aura:set attribute="else">
                                                <img src="/resource/AQB__NoInformation" height="16" width="16"/>
                                            </aura:set>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                                &nbsp;
                                <aura:if isTrue="{!greaterthan(item.AQB__BatchItemRecognitionCount__c, 0)}"> 
                                    <img src="/resource/AQB__BlueInformation" height="16" width="16" id="{!'R' + item.Id + '^' + item.AQB__AccountName__c}" onmouseover="{!c.showRecognitions}" onmouseout="{!c.cancelPopup}" />
                                    <aura:set attribute="else">
                                        <img src="/resource/AQB__NoInformation" height="16" width="16"/>
                                    </aura:set>
                                </aura:if>
                            </td>
                            <td style="text-align:center">
                                <aura:if isTrue="{!greaterthan(item.AQB__NumberOfLinkedFiles__c, 0)}"> 
                                    <img src="/resource/AQB__checkIcon" width="50" id="{!'F' + item.Id}" onmouseover="{!c.showFiles}" onmouseout="{!c.cancelPopup}" />
                                </aura:if>
                            </td>
                        </tr>
                    </aura:iteration>
                </tbody>        
            </table>
        </div>
    </aura:if>
    
    <!-- Select Account for Soft Credit -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="scAccountDialog">
            <div id="ex1" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hidescAccountPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">Choose Account For Soft Credit</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:60%;">
                            <tbody>
                                <tr>
                                    <td>
                                        Account:
                                    </td>
                                    <td>
                                        <force:inputField aura:id="newAccountLookup" value="{!v.newAccount.AQB__Account__c}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:right"><span aura:id="scDateLabel" class="slds-truncate">Gift Date:</span></td>
                                    <td><span aura:id="scDateField"><force:inputField value="{!v.newItem.AQB__DonorDate__c}" /></span></td>
                                    <td style="text-align:right"><span aura:id="sccDateLabel" class="slds-truncate">Gift Credited Date:</span></td>
                                    <td><span aura:id="sccDateField"><force:inputField value="{!v.newItem.AQB__CreditedYearOverrideDate__c}" /></span></td>
                        		</tr>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <ui:button label="OK" press="{!c.savescAccount}" />
                            <ui:button label="Cancel" press="{!c.hidescAccountPopup}" />
                        </center>
                        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Select Account -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="accountsDialog">
            <div id="ex1" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideAccountsPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">Account Options</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <aura:if isTrue="{!v.accountMatches.length != 0}"> 
                            <legend class="slds-form-element__label slds-text-title--caps">
                                <span style="font-weight: bold;">Choose one of the Potential matches found for this Account</span>
                            </legend>
                            <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                                <thead>
                                    <tr class="slds-text-heading--label">
                                        <th scope="col"><span class="slds-truncate">Account</span></th>
                                        <th scope="col" style="text-align:center"><span class="slds-truncate">Match Confidence</span></th>
                                        <th scope="col"><span class="slds-truncate">Details</span></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.accountMatches}" var="a">
                                        <tr>
                                            <td>
                                                <input type="radio" id="{!a.AQB__Account__c}" name="accountOption" label="" onchange="{!c.setAccountOption}" />&nbsp;
                                                <a href="{!'/' + a.AQB__Account__c}" target="_blank">
                                                    <aura:if isTrue="{!a.AQB__Details__c == 'User Selected'}">
                                                        {!v.currentAccountName}
                                                        <aura:set attribute="else">
                                                            {!a.AQB__Account__r.Name}
                                                        </aura:set>
                                                    </aura:if>
                                                </a>
                                            </td>
                                            <td style="text-align: center;">
                                                <aura:if isTrue="{!a.AQB__Details__c == 'User Selected'}">
                                                    User Selected
                                                    <aura:set attribute="else">
                                                        {!a.AQB__MatchConfidence__c}%
                                                    </aura:set>
                                                </aura:if>
                                            </td>
                                            <td>
                                                {!a.AQB__Details__c}
                                            </td>
                                        </tr>
                                    </aura:iteration>
                                </tbody>
                            </table>
                            <br />
                            <legend class="slds-form-element__label slds-text-title--caps">
                                <span style="font-weight: bold;">Or Choose</span>
                            </legend>
                        </aura:if>
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:60%;">
                            <tbody>
                                <tr>
                                    <td>
                                        <input type="radio" id="createNew" name="accountOption" label="" onchange="{!c.setAccountOption}" />&nbsp;Create a New Account
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input type="radio" id="useNew" name="accountOption" label="" onchange="{!c.setAccountOption}" />&nbsp;Use this Account 
                                    </td>
                                    <td>
                                        <force:inputField aura:id="newAccountLookup" value="{!v.newAccount.AQB__Account__c}" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <ui:button label="Save" press="{!c.saveAccountOption}" />
                            <ui:button label="Cancel" press="{!c.hideAccountsPopup}" />
                        </center>
                        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Open Pledges -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="openPledgesDialog">
            <div id="ex2" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideOpenPledgesPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">
                        <aura:if isTrue="{!v.currentLinkIndicator == 'WriteOff'}">
                            Pledge Write Off
                            <aura:set attribute="else">
                                <aura:if isTrue="{!v.currentLinkIndicator == 'Multiple'}">
                                    This Gift for {!v.currentAccountName} is Linked to Multiple Pledges
                                    <aura:set attribute="else">
                                        <aura:if isTrue="{!v.showLink != True}">
                                            {!v.currentAccountName} has Gifts with Open Pledges
                                            <aura:set attribute="else">
                                                This Gift for {!v.currentAccountName} is Linked to a Pledge
                                            </aura:set>
                                        </aura:if>
                                    </aura:set>
                                </aura:if>
                            </aura:set>
                        </aura:if>
                    </h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                            <aura:if isTrue="{!v.currentLinkIndicator == 'DoNotLink'}">
                                <h2 class="slds-text-heading--small" style="color: red;">
                                    This item is currently saved without linking to any pledge.<br /><br />
                                </h2>
                            </aura:if>
                            <aura:if isTrue="{!v.currentLinkIndicator == 'Integration'}">
                                This pledge was linked via the integration and cannot be removed.
                                <aura:set attribute="else">
                                    <aura:if isTrue="{!v.currentLinkIndicator == 'AlreadyLinked'}">
                                        This batch item is already linked to a recurring gift or an opportunity and cannot be be linked to a pledge.
                                        <aura:set attribute="else">
                                            <aura:if isTrue="{!v.currentLinkIndicator == 'WriteOff'}">
                                                Listed below are all outstanding pledges from this account. Select the gift with the pledge you wish to Write Off.
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!v.currentLinkIndicator == 'Multiple'}">
                            							These are the Pledges being paid.
                                						<aura:set attribute="else">                           
                                                            <aura:if isTrue="{!v.showLink != True}">
                                                                If you wish to post this payment to one of the following gifts with open pledges, click the "Post As Pledge Payment" link on the appropriate row.
                                                                <aura:set attribute="else">
                                                                    If you wish to remove the link to the pledge, click the "Remove Link to Pledge" link on the appropriate row.
                                                                    <aura:if isTrue="{!v.recurringGiftPledgeLink == 'Auto'}">
                                                                        <span style="color: red;"><br />
                                                                            This pledge was automatically linked through the recurring gift.  If you remove the link to the pledge, the link to the recurring gift will also be removed.
                                                                        </span>
                                                                    </aura:if>
                                                                </aura:set>
                                                            </aura:if>
                                                        </aura:set>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </aura:set>
                                    </aura:if>
                                </aura:set>
                            </aura:if>
                        </legend>
                        <br />
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col"><span class="slds-truncate">Action</span></th>
                                    <th scope="col"><span class="slds-truncate">Number</span></th>
                                    <th scope="col"><span class="slds-truncate">Date</span></th>
                                    <th scope="col"><span class="slds-truncate">Fundraising Campaign</span></th>
                                    <th scope="col"><span class="slds-truncate">Total Pledge</span></th> 
                                    <th scope="col"><span class="slds-truncate">Pledge Balance</span></th> 
                                    <th scope="col"><span class="slds-truncate">Next Payment Due Date</span></th> 
                                    <th scope="col"><span class="slds-truncate">Pledge Designation</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.openPledges}" var="p">
                                    <tr>
                                        <td>
                                            <aura:if isTrue="{!v.currentLinkIndicator == 'WriteOff'}">
                                                <a href="" style="color: blue" id="{!'P' + p.Id}" onclick="{!c.writeOffPledge}">Write Off Pledge</a>
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!and(and(v.showLink != True, v.currentLinkIndicator != 'AlreadyLinked'), v.currentLinkIndicator != 'Multiple')}">
                                                        <a href="" style="color: blue" id="{!'P' + p.Id}" onclick="{!c.linkPledge}">Post as Pledge Payment</a>
                                                        <aura:set attribute="else">
                                                            <aura:if isTrue="{!and(and(v.currentLinkIndicator != 'Integration', v.currentLinkIndicator != 'AlreadyLinked'), v.currentLinkIndicator != 'Multiple')}">
                                                                <a href="" style="color: blue" id="{!'P' + p.Id}" onclick="{!c.unlinkPledge}">Remove Link</a>
                                                            </aura:if>
                                                            <aura:if isTrue="{!v.currentLinkIndicator == 'System'}">
                                                                &nbsp;|&nbsp;<a href="" style="color: blue" id="{!'p' + p.Id}" onclick="{!c.verifyPledge}">Confirm Link</a>
                                                            </aura:if>
                                                        </aura:set>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </td>
                                        <td>
                                            <a href="{!'/' + p.Id}" target="_blank">{!p.Name}</a>
                                        </td>
                                        <td>
                                            {!p.AQB__Date__c}
                                        </td>
                                        <td>
                                            <a href="{!'/' + p.AQB__CampaignFund__c}" target="_blank">{!p.AQB__CampaignFund__r.Name}</a>
                                        </td>
                                        <td>
                                            <ui:outputCurrency value="{!p.AQB__RollUpRestrictedTotal__c}" />
                                        </td>
                                        <td>
                                            <ui:outputCurrency value="{!p.AQB__RollUpPledgeBalanceTotal__c}" />
                                        </td>
                                        <td>
                                            {!p.AQB__NextPledgeDueDate__c}
                                        </td>
                                        <td>
                                            {!p.AQB__GiftDescription__c}
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <aura:if isTrue="{!v.currentLinkIndicator == 'WriteOff'}">
                                <ui:button label="Cancel" press="{!c.resetForm}" />
                                <aura:set attribute="else">
                                    <aura:if isTrue="{!and(and(v.showLink != True, v.currentLinkIndicator != 'DoNotLink'), v.currentLinkIndicator != 'Multiple')}">
                                        <ui:button label="Save Transaction without Linking" press="{!c.saveNoPledgeLink}" />
                                    </aura:if>
                                    <ui:button label="Cancel" press="{!c.hideOpenPledgesPopup}" />
                                </aura:set>
                            </aura:if>
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Open Pledge Options -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="openPledgesOptDialog">
            <div id="ex2" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideOpenPledgesOptPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">
                        Open Pledges for {!v.currentAccountName}
                    </h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                        	IF THIS A PAYMENT ON AN EXISTING PLEDGE, check the box next to the pledge(s) THAT YOU WANT TO RECEIVE PAYMENT.
                        </legend>                        
                        <br />
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col"><span class="slds-truncate">Action</span></th>
                                    <th scope="col"><span class="slds-truncate">Number</span></th>
                                    <th scope="col"><span class="slds-truncate">Date</span></th>
                                    <th scope="col"><span class="slds-truncate">Fundraising Campaign</span></th>
                                    <th scope="col"><span class="slds-truncate">Total Pledge</span></th> 
                                    <th scope="col"><span class="slds-truncate">Pledge Balance</span></th> 
                                    <th scope="col"><span class="slds-truncate">Next Payment Due Date</span></th> 
                                    <th scope="col"><span class="slds-truncate">Pledge Designation</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.openPledges}" var="p">
                                    <tr>
                                        <td>
                                            <center><ui:inputCheckbox text="{!p.Id}" aura:id="boxPackP" value="false" /></center>
                                        </td>
                                        <td>
                                            <a href="{!'/' + p.Id}" target="_blank">{!p.Name}</a>
                                        </td>
                                        <td>
                                            {!p.AQB__Date__c}
                                        </td>
                                        <td>
                                            <a href="{!'/' + p.AQB__CampaignFund__c}" target="_blank">{!p.AQB__CampaignFund__r.Name}</a>
                                        </td>
                                        <td>
                                            <ui:outputCurrency value="{!p.AQB__RollUpRestrictedTotal__c}" />
                                        </td>
                                        <td>
                                            <ui:outputCurrency value="{!p.AQB__RollUpPledgeBalanceTotal__c}" />
                                        </td>
                                        <td>
                                            {!p.AQB__NextPledgeDueDate__c}
                                        </td>
                                        <td>
                                            <aura:if isTrue="{!p.AQB__GiftDescription__c == 'Multiple'}">
                                                <span style="color: green; font-weight: bold;">{!p.AQB__GiftDescription__c}</span>
                                                <aura:set attribute="else">
                                                    {!p.AQB__GiftDescription__c}
                                                </aura:set>
                        					</aura:if>
                                    	</td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <center>
                        	<ui:button label="Post as Pledge Payment" press="{!c.showOpenPledgesTrans}" />
                            <ui:button label="Do not Post as Pledge Payment" press="{!c.hideOpenPledgesOptPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Recurring Gifts -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="recurringGiftsDialog">
            <div id="ex2" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideRecurringGiftsPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">
                        <aura:if isTrue="{!v.showLink != True}">
                            {!v.currentAccountName} has Recurring Gifts
                            <aura:set attribute="else">
                                This Gift for {!v.currentAccountName} is Linked to a Recurring Gift
                            </aura:set>
                        </aura:if>
                    </h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                            <aura:if isTrue="{!v.currentLinkIndicator == 'DoNotLink'}">
                                <h2 class="slds-text-heading--small" style="color: red;">
                                    This item is currently saved without linking to any recurring gift.<br /><br />
                                </h2>
                            </aura:if>
                            <aura:if isTrue="{!v.currentLinkIndicator == 'Integration'}">
                                This recurring gift was linked via the integration and cannot be removed.
                                <aura:set attribute="else">
                                    <aura:if isTrue="{!v.currentLinkIndicator == 'AlreadyLinked'}">
                                        This batch item is already linked to a pledge or an opportunity and cannot be be linked to a recurring gift.
                                        <aura:set attribute="else">
                                            <aura:if isTrue="{!v.showLink != True}">
                                                If you wish to post this payment to one of the following recurring gifts, click the "Post as Recurring Gift Payment" link on the appropriate row.
                                                <aura:set attribute="else">
                                                    If you wish to remove the link to the recurring gift, click the "Remove Link to Recurring Gift" link on the appropriate row.
                                                    <aura:if isTrue="{!v.recurringGiftPledgeLink == 'Auto'}">
                                                        <span style="color: red;"><br />
                                                            A pledge was automatically linked through this recurring gift.  If you remove the link to the recurring gift, the link to the pledge will also be removed.
                                                        </span>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </aura:set>
                                    </aura:if>
                                </aura:set>
                            </aura:if>
                        </legend>
                        <br />
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col"><span class="slds-truncate">Action</span></th>
                                    <th scope="col"><span class="slds-truncate">Number</span></th>
                                    <th scope="col"><span class="slds-truncate">Start Date</span></th>
                                    <th scope="col"><span class="slds-truncate">End Date</span></th>
                                    <th scope="col"><span class="slds-truncate">Frenquency</span></th>
                                    <th scope="col"><span class="slds-truncate">Fundraising Campaign</span></th>
                                    <th scope="col"><span class="slds-truncate">Designation</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.recurringGifts}" var="r">
                                    <tr>
                                        <td>
                                            <aura:if isTrue="{!and(v.showLink != True, v.currentLinkIndicator != 'AlreadyLinked')}">
                                                <a href="" style="color: blue" id="{!'R' + r.Id}" onclick="{!c.linkRecurringGift}">Post as Recurring Gift Payment</a>
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!and(v.currentLinkIndicator != 'Integration', v.currentLinkIndicator != 'AlreadyLinked')}">
                                                        <a href="" style="color: blue" id="{!'R' + r.Id}" onclick="{!c.unlinkRecurringGift}">Remove Link</a>
                                                    </aura:if>
                                                    <aura:if isTrue="{!v.currentLinkIndicator == 'System'}">
                                                        &nbsp;|&nbsp;<a href="" style="color: blue" id="{!'r' + r.Id}" onclick="{!c.verifyRecurringGift}">Confirm Link</a>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </td>
                                        <td>
                                            <a href="{!'/' + r.Id}" target="_blank">{!r.Name}</a>
                                        </td>
                                        <td>
                                            {!r.AQB__DateStarted__c}
                                        </td>
                                        <td>
                                            {!r.AQB__DateEnded__c}
                                        </td>
                                        <td>
                                            {!r.AQB__Frequency__c}
                                        </td>
                                        <td>
                                            <a href="{!'/' + r.AQB__FundraisingCampaign__c}" target="_blank">{!r.AQB__FundraisingCampaign__r.Name}</a>
                                        </td>
                                        <td>
                                            <a href="{!'/' + r.AQB__Designation__c}" target="_blank">{!r.AQB__Designation__r.Name}</a>
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <aura:if isTrue="{!and(v.showLink != True, v.currentLinkIndicator != 'DoNotLink')}">
                                <ui:button label="Save Transaction without Linking" press="{!c.saveNoRecurringGiftLink}" />
                            </aura:if>
                            <ui:button label="Cancel" press="{!c.hideRecurringGiftsPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Recurring Gift To Be Created -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="newRecurringGiftDialog">
            <div id="ex2" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideNewRecurringGiftPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">
                        This Recurring Gift will be created for {!v.currentAccountName}
                    </h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
	                        The following recurring gift will be create for {!v.currentAccountName}
                        </legend>
                        <br />
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col"><span class="slds-truncate">Action</span></th>
                                    <th scope="col"><span class="slds-truncate">Amount</span></th>
                                    <th scope="col"><span class="slds-truncate">Start Date</span></th>
                                    <th scope="col"><span class="slds-truncate">End Date</span></th>
                                    <th scope="col"><span class="slds-truncate">Frenquency</span></th>
                                    <th scope="col"><span class="slds-truncate">Fundraising Campaign</span></th>
                                    <th scope="col"><span class="slds-truncate">Designation</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <a href="" style="color: blue" id="{!'R' + v.currentItem.Id}" onclick="{!c.deleteRecurringGift}">Delete</a>
                                    </td>
                                    <td>
                                        <ui:outputCurrency value="{!v.currentItem.AQB__RecurringGiftAmount__c}" />
                                    </td>
                                    <td>
                                        {!v.currentItem.AQB__PledgeStartDate__c}
                                    </td>
                                    <td>
                                        {!v.currentItem.AQB__PledgeEndDate__c}
                                    </td>
                                    <td>
                                        {!v.currentItem.AQB__Frequency__c}
                                    </td>
                                    <td>
                                        <a href="{!'/' + v.currentItem.AQB__FundraisingCampaignForGift__c}" target="_blank">{!v.currentItem.AQB__FundraisingCampaignForGift__r.Name}</a>
                                    </td>
                                    <td>
                                        <a href="{!'/' + v.currentItem.AQB__ChartOfAccounts__c}" target="_blank">{!v.currentItem.AQB__ChartOfAccounts__r.Name}</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <ui:button label="Cancel" press="{!c.hideNewRecurringGiftPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Open Opportunities -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="openOpportunitiesDialog">
            <div id="ex3" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideOpenOpportunitiesPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">
                        <aura:if isTrue="{!v.currentLinkIndicator == 'PlannedGift'}">
                            Planned Gift
                            <aura:set attribute="else">
                                <aura:if isTrue="{!v.showLink != True}">
                                    {!v.currentAccountName} has Unfunded Opportunities
                                    <aura:set attribute="else">
                                        This Gift for {!v.currentAccountName} is Linked to an Opportunity
                                    </aura:set>
                                </aura:if>
                            </aura:set>
                        </aura:if>
                    </h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                            <aura:if isTrue="{!v.currentLinkIndicator == 'DoNotLink'}">
                                <h2 class="slds-text-heading--small" style="color: red;">
                                    This item is currently saved without linking to any opportunity.<br /><br />
                                </h2>
                            </aura:if>
                            <aura:if isTrue="{!v.currentLinkIndicator == 'PlannedGift'}">
                                LISTED BELOW ARE ALL OPEN Planned Gift Opportunities FROM THIS ACCOUNT. SELECT THE Opportunity YOU WISH TO fund.
                            	<aura:set attribute="else">
                                    <aura:if isTrue="{!v.currentLinkIndicator == 'Integration'}">
                                        This opportunity was linked via the integration and cannot be removed.
                                        <aura:set attribute="else">
                                            <aura:if isTrue="{!v.currentLinkIndicator == 'AlreadyLinked'}">
                                                This batch item is already linked to a pledge or recurring gift and cannot be be linked to an opportunity.
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!v.showLink != True}">
                                                        If you wish to credit this payment to one of the following opportunities, click the "Link Payment to Opportunity" link on the row with the appropriate opportunity.
                                                        <aura:set attribute="else">
                                                            If you wish to remove the link to the opportunity, click the "Remove Link to Opportunity" link on the row with the appropriate opportunity.
                                                        </aura:set>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </aura:set>
                                    </aura:if>
                                </aura:set>
                            </aura:if>
                        </legend>
                        <br />
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col"><span class="slds-truncate">Action</span></th>
                                    <th scope="col"><span class="slds-truncate">Opportunity Name</span></th>
                                    <th scope="col"><span class="slds-truncate">Record Type</span></th>
                                    <th scope="col"><span class="slds-truncate">Stage</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Amount</span></th> 
                                    <th scope="col"><span class="slds-truncate">Close Date</span></th> 
                                    <th scope="col"><span class="slds-truncate">Description</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.openOpportunities}" var="o">
                                    <tr>
                                        <td>
                                            <aura:if isTrue="{!v.currentLinkIndicator == 'PlannedGift'}">
                                                <a href="" style="color: blue" id="{!'O' + o.Id}" onclick="{!c.payOpportunity}">Fund Opportunity</a>
                                                <aura:set attribute="else">
                                                    <aura:if isTrue="{!and(v.showLink != True, v.currentLinkIndicator != 'AlreadyLinked')}">
                                                        <a href="" style="color: blue" id="{!'O' + o.Id}" onclick="{!c.linkOpportunity}">Link Payment to Opportunity</a>
                                                        <aura:set attribute="else">
                                                            <aura:if isTrue="{!and(v.currentLinkIndicator != 'Integration', v.currentLinkIndicator != 'AlreadyLinked')}">
                                                                <a href="" style="color: blue" id="{!'O' + o.Id}" onclick="{!c.unlinkOpportunity}">Remove Link</a>
                                                            </aura:if>
                                                            <aura:if isTrue="{!v.currentLinkIndicator == 'System'}">
                                                                &nbsp;|&nbsp;<a href="" style="color: blue" id="{!'o' + o.Id}" onclick="{!c.verifyOpportunity}">Confirm Link</a>
                                                            </aura:if>
                                                        </aura:set>
                                                    </aura:if>
                                                </aura:set>
                                            </aura:if>
                                        </td>
                                        <td>
                                            {!o.Name}
                                        </td>
                                        <td>
                                            {!o.RecordType.Name}
                                        </td>
                                        <td>
                                            {!o.StageName}
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!o.Amount}" />
                                        </td>
                                        <td>
                                            {!o.CloseDate}
                                        </td>
                                        <td>
                                            {!o.Description}
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <aura:if isTrue="{!v.currentLinkIndicator == 'PlannedGift'}">
                                <ui:button label="Do not fund an existing Opportunity" press="{!c.noOpportunity}" />
                                <ui:button label="Cancel" press="{!c.resetForm}" />
                                <aura:set attribute="else">
                                    <aura:if isTrue="{!and(v.showLink != True, v.currentLinkIndicator != 'DoNotLink')}">
                                        <ui:button label="Save Transaction without Linking" press="{!c.saveNoOpportunityLink}" />
                                    </aura:if>
                                    <ui:button label="Cancel" press="{!c.hideOpenOpportunitiesPopup}" />
                                </aura:set>
                            </aura:if>
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- CampaignAppeal -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-hide;" aura:id="campaignDialog">
            <div id="ex5" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideCampaignPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">Campaign Appeal for {!v.currentAccountName}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <center>
                            <table>
                                <tr>
                                    <td>
                                        Campaign:
                                    </td>
                                    <td>
                                        <force:inputField aura:id="inputCampaign" value="{!v.currentItem.AQB__CampaignAppeal__c}" required="true" />
                                    </td>
                                </tr>
                            </table>
                        </center>
                        <br />
                        <center>
                            <ui:button label="Save" press="{!c.saveCampaign}" />
                            <ui:button label="Cancel" press="{!c.hideCampaignPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Match Potentials -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="matchPotentialsDialog">
            <div id="ex4" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideMatchPotentialsPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">Match Potentials for {!v.currentAccountName}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <center>
                            <table class="slds-table slds-table--bordered" style="width:80%;">
                                <thead>
                                    <tr class="slds-text-heading--label">
                                        <th scope="col"><span class="slds-truncate">Action</span></th>
                                        <th scope="col"><span class="slds-truncate">Matching Account</span></th>
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Amount</span></th>
                                        <th scope="col" style="text-align:center"><span class="slds-truncate">Match Ratio</span></th>
                                        <th scope="col"><span class="slds-truncate">Campaign Fund</span></th>
                                        <th scope="col"><span class="slds-truncate">Designation</span></th> 
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.matchPotentials}" var="mp">
                                        <tr>
                                            <td>
                                                <a href="{!'/' + mp.Id}" target="_blank" style="color: blue">View</a>&nbsp;|&nbsp;
                                                <a href="" id="{!mp.Id}" style="color: blue" onclick="{!c.confirmDeleteMatch}">Delete</a>
                                            </td>
                                            <td>
                                                <a href="{!'/' + mp.AQB__MatchingAccount__c}" target="_blank">{!mp.AQB__MatchingAccount__r.Name}</a>
                                            </td>
                                            <td style="text-align:right">
                                                <ui:outputCurrency value="{!mp.AQB__Amount__c}"/>
                                            </td>
                                            <td style="text-align:center">
                                                {!mp.AQB__MatchRatio__c}:1
                                            </td>
                                            <td>
                                                {!mp.AQB__CampaignFund__r.Name}
                                            </td>
                                            <td>
                                                {!mp.AQB__Designation__r.Name}
                                            </td>
                                        </tr>
                                    </aura:iteration>
                                </tbody>
                            </table>
                        </center>
                        <br />
                        <center>
                            <ui:button label="Cancel" press="{!c.hideMatchPotentialsPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Activities/Quids -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-hide;" aura:id="quidsDialog">
            <div id="ex5" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideQuidsPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">Quid Pro Quos for {!v.currentAccountName}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <center>
                            <table class="slds-table slds-table--bordered" style="width:80%;">
                                <thead>
                                    <tr class="slds-text-heading--label">
                                        <th scope="col"><span class="slds-truncate">Action</span></th>
                                        <th scope="col"><span class="slds-truncate">Item</span></th> 
                                        <th scope="col"><span class="slds-truncate">Type</span></th> 
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Value</span></th> 
                                        <th scope="col" style="text-align:center"><span class="slds-truncate">Accepted</span></th> 
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.quids}" var="q">
                                        <tr>
                                            <td>
                                                <a href="{!'/' + q.Id}" target="_blank" style="color: blue">View</a>&nbsp;|&nbsp;
                                                <a href="" id="{!q.Id + '^Quid'}" style="color: blue" onclick="{!c.editItem}">Edit</a>&nbsp;|&nbsp;
                                                <a href="" id="{!q.Id}" style="color: blue" onclick="{!c.confirmDeleteQuid}">Delete</a>
                                            </td>
                                            <td>
                                                {!q.AQB__Item__r.Name}
                                            </td>
                                            <td>
                                                {!q.AQB__Item__r.AQB__Type__c}
                                            </td>
                                            <td style="text-align:right">
                                                <ui:outputCurrency value="{!q.AQB__Value__c}" />
                                            </td>
                                            <td>
                                                <center><ui:outputCheckbox value="{!q.AQB__Accepted__c}"/></center>
                                            </td>
                                        </tr>
                                    </aura:iteration>
                                </tbody>
                            </table>
                        </center>
                        <br />
                        <center>
                            <ui:button label="Cancel" press="{!c.hideQuidsPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Tributes -->
    <div class="slds">
        <div aria-hidden="false" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="tributesDialog">
            <div id="ex6" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideTributesPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">Tributes for {!v.currentAccountName}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <table class="slds-table" style="width:90%;">
                            <tbody>
                                <aura:iteration items="{!v.tributes}" var="t">
                                    <tr>
                                        <td>
                                            <a href="{!'/' + t.Id}" target="_blank" style="color: blue">View</a>&nbsp;|&nbsp;
                                            <a href="" id="{!t.Id + '^Tribute'}" style="color: blue" onclick="{!c.editItem}">Edit</a>&nbsp;|&nbsp;
                                            <a href="" id="{!t.Id}" style="color: blue" onclick="{!c.confirmDeleteTribute}">Delete</a>
                                        </td>
                                        <td>
                                            <span class="slds-form-element__label">Type:</span> {!t.AQB__Type__c}
                                        </td>
                                        <td>
                                            <span class="slds-form-element__label">Honoree:</span>
                                            <aura:if isTrue="{!t.AQB__Contact__c != null}">
                                                <a href="{!'/' + t.AQB__Contact__c}" target="_blank">{!t.AQB__HonoreeName__c}</a>
                                                <aura:set attribute="else">{!t.AQB__HonoreeName__c}</aura:set>
                                            </aura:if>
                                        </td>
                                        <td>
                                            <span class="slds-form-element__label">Amount:</span> <ui:outputCurrency value="{!t.AQB__Amount__c}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <span class="slds-form-element__label">Donor:</span> <a href="{!'/' + t.AQB__DonorAccount__c}" target="_blank">{!t.AQB__DonorAccount__r.Name}</a>
                                        </td>
                                        <td>
                                            <span class="slds-form-element__label">Fundraising Campaign:</span> <a href="{!'/' + t.AQB__CampaignFund__c}" target="_blank">{!t.AQB__CampaignFund__r.Name}</a>
                                        </td>
                                        <td>
                                            <span class="slds-form-element__label">Description:</span> {!t.AQB__Description__c}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td colspan="3">
                                            <h2 class="slds-text-heading--small" style="color: #0000A0;">Notifications:</h2>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td colspan="3">
                                            <AQB:BatchItemTributes tributeId="{!t.Id}" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <hr style="height:1px; margin-top: 5px; margin-bottom: 5px; background-color: 0000A0; width=100%; text-align:center;" />
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <br />
                        <center>
                            <ui:button label="Cancel" press="{!c.hideTributesPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Transactions -->
    <div class="slds">
        <div aria-hidden="false" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="transactionsDialog">
            <div id="ex6" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <h2 class="slds-text-heading--medium">Transactions for {!v.currentAccountName}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col"><span class="slds-truncate">Action</span></th>
                                    <th scope="col"><span class="slds-truncate">Type</span></th>
                                    <th scope="col"><span class="slds-truncate">Amount</span></th>
                                    <th scope="col"><span class="slds-truncate">Due Date</span></th>
                                    <th scope="col">
                                        <aura:if isTrue="{!v.currentMethod == 'Check'}"> 
                                            <span class="slds-truncate">Check Number</span>
                                        </aura:if>
                                        <aura:if isTrue="{!v.currentMethod == 'ACH' || v.currentMethod == 'Wire' || v.currentMethod == 'PayPal' || v.currentMethod == 'Transfer'}"> 
                                            <span class="slds-truncate">Reference</span>
                                        </aura:if>
                                        <aura:if isTrue="{!v.currentMethod == 'Personal Property' || v.currentMethod == 'Real Property'}"> 
                                            <span class="slds-truncate">Property Category</span>
                                        </aura:if>
                                    </th>
                                    <th scope="col"><span class="slds-truncate">Designation</span></th> 
                                    <th scope="col"><span class="slds-truncate">Acknowledgement</span></th> 
                                    <th scope="col"><span class="slds-truncate">Description</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.transactions}" var="t">
                                    <tr>
                                        <td>
                                            <a href="{!'/' + t.Id}" target="_blank" style="color: blue">View</a>&nbsp;|&nbsp;
                                            <a href="" id="{!t.Id + '^Transaction'}" style="color: blue" onclick="{!c.editItem}">Edit</a>&nbsp;|&nbsp;
                                            <aura:if isTrue="{!v.numberOfTransactions == 1}">
                                                <span style="color: gray">Delete</span>
                                                <aura:set attribute="else">
                                                    <a href="" style="color: blue" id="{!t.Id}" onclick="{!c.confirmDeleteTransaction}">Delete</a>
                                                </aura:set>
                                            </aura:if>
                                        </td>
                                        <td>
                                            {!t.AQB__Method__c}
                                        </td><td>
                                            <td style="text-align:right">
                                                <ui:outputCurrency value="{!t.AQB__Amount__c}" />
                                            </td>
                                        </td>
                                        <td>
                                            {!t.AQB__DateDue__c}
                                        </td>
                                        <td>
                                            <aura:if isTrue="{!v.currentMethod == 'Check'}"> 
                                                {!t.AQB__CheckNumber__c}
                                            </aura:if>
                                            <aura:if isTrue="{!v.currentMethod == 'ACH' || v.currentMethod == 'Wire' || v.currentMethod == 'PayPal' || v.currentMethod == 'Transfer'}"> 
                                                {!t.AQB__Reference__c}
                                            </aura:if>
                                            <aura:if isTrue="{!v.currentMethod == 'Personal Property' || v.currentMethod == 'Real Property'}"> 
                                                {!t.AQB__PropertyCategory__c}
                                            </aura:if>
                                        </td>
                                        <td>
                                            <span title="{!t.AQB__Designation__r.AQB__DesignationAccountNumber__c}" style="color: green; font-weight: bold;">{!t.AQB__Designation__r.Name}</span>
                                        </td>
                                        <td>
                                            {!t.AQB__Acknowledgement__r.Name}
                                        </td>
                                        <td>
                                            {!t.AQB__Description__c}
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <ui:button label="Cancel" press="{!c.hideTransactionsPopup}" />
                        </center> 
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Recognitions -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="recognitionsDialog">
            <div id="ex9" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideRecognitionsPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">Recognitions for {!v.currentAccountName}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <center>
                            <table class="slds-table slds-table--bordered" style="width:80%;">
                                <thead>
                                    <tr class="slds-text-heading--label">
                                        <th scope="col"><span class="slds-truncate">Action</span></th>
                                        <th scope="col"><span class="slds-truncate">Contact Credited</span></th> 
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Legal Credit %</span></th> 
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Gift Recognition Credit %</span></th> 
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Fundraising Campaign</span></th> 
                                        <th scope="col" style="text-align:center"><span class="slds-truncate">Anonymous</span></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.recognitions}" var="r">
                                        <tr>
                                            <td>
                                                <a href="{!'/' + r.Id}" target="_blank" style="color: blue">View</a>&nbsp;|&nbsp;
                                                <a href="" id="{!r.Id + '^Recognition'}" style="color: blue" onclick="{!c.editItem}">Edit</a>&nbsp;|&nbsp;
                                                <a href="" id="{!r.Id + '^' + r.AQB__ContactCredited__r.Name}" style="color: blue" onclick="{!c.confirmDeleteRecognition}">Delete</a>
                                            </td>
                                            <td>
                                                <a href="{!'/' + r.AQB__ContactCredited__c}" target="_blank">{!r.AQB__ContactCredited__r.Name}</a>
                                            </td>
                                            <td style="text-align:right">
                                                {!r.AQB__PrimaryGiftRecognitionCreditPercent__c}
                                            </td>
                                            <td style="text-align:right">
                                                {!r.AQB__SecondaryGiftRecognitionCreditPercent__c}
                                            </td>
                                            <td style="text-align:right">
                                                {!r.AQB__FundraisingCampaign__r.Name}
                                            </td>
                                            <td>
                                                <center><ui:outputCheckbox value="{!r.AQB__Anonymous__c}"/></center>
                                            </td>
                                        </tr>
                                    </aura:iteration>
                                </tbody>
                            </table>
                        </center>
                        <br />
                        <center>
                            <ui:button label="Cancel" press="{!c.hideRecognitionsPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Attachments 
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal- -prompt slds-fade-in-hide;" aura:id="attachmentDialog">
            <div id="ex8" class="slds-modal__container" onmouseleave="{!c.hideAttachmentPopup}">
                <div class="slds-modal__header slds-theme- -info">
                    <button class="slds-button slds-button- -icon-inverse slds-notify__close" onclick="{!c.hideAttachmentPopup}" style="float:right">
                        <c:svg class="slds-button__icon slds-button__icon- -large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </c:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading- -medium">Image</h2>
                </div>
                <div class="slds-modal__content slds-p-around- -medium">
                    <center>
                        <force:outputField value="{!v.currentItem.AQB__Picture__c}"></force:outputField>
                        <br /><br />
                        <ui:button label="Cancel" press="{!c.hideAttachmentPopup}" />
                    </center>
                </div>
            </div>
        </div>
    </div>    -->
    
    <!-- Link Open Pledges/Opportunities during Data Entry -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="openStuffDialog">
            <div id="ex2" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideOpenStuffPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">
                        <aura:if isTrue="{!and(v.currentLinkIndicator != 'Convert', v.currentLinkIndicator != 'PayPledge')}"> 
                        	Open Pledges and/or Unfunded Opportunities
                            <aura:set attribute="else">
                                Open Pledges for {!v.currentAccountName}
                            </aura:set>
                        </aura:if>
                    </h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <!-- Open Pledges -->
                        <aura:if isTrue="{!v.openPledges.length != 0}"> 
                            <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                                <aura:if isTrue="{!and(v.currentLinkIndicator != 'Convert', v.currentLinkIndicator != 'PayPledge')}"> 
                        			If you wish to post this payment to one of the following gifts with open pledges, click the "Post As Pledge Payment" link on the appropriate row.  
                                    <aura:set attribute="else">
                                        If this a payment on an existing pledge, click the "Post As Pledge Payment" link on the appropriate row that you want to receive the payment.
                                    </aura:set>
                                </aura:if>
                            </legend>
                            <br />
                            <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                                <thead>
                                    <tr class="slds-text-heading--label">
                                        <th scope="col"><span class="slds-truncate">Action</span></th>
                                        <th scope="col"><span class="slds-truncate">Number</span></th>
                                        <th scope="col"><span class="slds-truncate">Date</span></th>
                                        <th scope="col"><span class="slds-truncate">Fundraising Campaign</span></th>
                                        <th scope="col"><span class="slds-truncate">Total Pledge</span></th> 
                                        <th scope="col"><span class="slds-truncate">Pledge Balance</span></th> 
                                        <th scope="col"><span class="slds-truncate">Next Payment Due Date</span></th> 
                                        <th scope="col"><span class="slds-truncate">Pledge Designation</span></th> 
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.openPledges}" var="p">
                                        <tr>
                                            <td>
                                                <a href="" style="color: blue" id="{!'P' + p.Id}" onclick="{!c.linkPledgeToItem}">Post as Pledge Payment</a>
                                            </td>
                                            <td>
                                                <a href="{!'/' + p.Id}" target="_blank">{!p.Name}</a>
                                            </td>
                                            <td>
                                                {!p.AQB__Date__c}
                                            </td>
                                            <td>
                                                <a href="{!'/' + p.AQB__CampaignFund__c}" target="_blank">{!p.AQB__CampaignFund__r.Name}</a>
                                            </td>
                                            <td>
                                                <ui:outputCurrency value="{!p.AQB__RollUpRestrictedTotal__c}" />
                                            </td>
                                            <td>
                                                <ui:outputCurrency value="{!p.AQB__RollUpPledgeBalanceTotal__c}" />
                                            </td>
                                            <td>
                                                {!p.AQB__NextPledgeDueDate__c}
                                            </td>
                                            <td>
                                                {!p.AQB__GiftDescription__c}
                                            </td>
                                        </tr>
                                    </aura:iteration>
                                </tbody>
                            </table>
                            <br />
                        </aura:if>
                        <aura:if isTrue="{!and(v.openOpportunities.length != 0, v.openPledges.length != 0)}"> 
                            <hr style="height:2px; margin-top: 5px; margin-bottom: 5px; background-color: blue; width=100%; text-align:center;" />
                            <br />
                        </aura:if>
                        <!-- Open Opportunities -->
                        <aura:if isTrue="{!v.openOpportunities.length != 0}"> 
                            <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                                If you wish to credit this payment to one of the following opportunities, click the "Link Payment to Opportunity" link on the row with the appropriate opportunity.
                            </legend>
                            <br />
                            <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                                <thead>
                                    <tr class="slds-text-heading--label">
                                        <th scope="col"><span class="slds-truncate">Action</span></th>
                                        <th scope="col"><span class="slds-truncate">Opportunity Name</span></th>
                                        <th scope="col"><span class="slds-truncate">Stage</span></th>
                                        <th scope="col"><span class="slds-truncate">Close Date</span></th> 
                                        <th scope="col" style="text-align:right"><span class="slds-truncate">Amount</span></th> 
                                        <th scope="col"><span class="slds-truncate">Description</span></th> 
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.openOpportunities}" var="o">
                                        <tr>
                                            <td>
                                                <a href="" style="color: blue" id="{!'O' + o.Id}" onclick="{!c.linkOpportunityToItem}">Link Payment to Opportunity</a>
                                            </td>
                                            <td>
                                                {!o.Name}
                                            </td>
                                            <td>
                                                {!o.StageName}
                                            </td>
                                            <td>
                                                {!o.CloseDate}
                                            </td>
                                            <td style="text-align:right">
                                                <ui:outputCurrency value="{!o.Amount}" />
                                            </td>
                                            <td>
                                                {!o.Description}
                                            </td>
                                        </tr>
                                    </aura:iteration>
                                </tbody>
                            </table>
                        </aura:if>
                        <br />
                        <center>
                            <aura:if isTrue="{!and(v.currentLinkIndicator != 'Convert', v.currentLinkIndicator != 'PayPledge')}"> 
                            	<ui:button label="Save Transaction without Linking" press="{!c.goSaveNoLink}" />
                            	<aura:set attribute="else">
                                    <ui:button label="Do not Post as Pledge Payment" press="{!c.hideOpenStuffPopup}" />
                                </aura:set>
                            </aura:if>
                            <ui:button label="Cancel" press="{!c.hideOpenStuffPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Select Gift -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="giftSelectDialog">
            <div id="ex2" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideGiftSelectPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">
                        <aura:if isTrue="{!v.currentLinkIndicator == 'AddTransaction'}">
                            Add a Transaction
                        </aura:if>
                        <aura:if isTrue="{!v.currentLinkIndicator == 'Void'}">
                            Void a Transaction
                        </aura:if>
                        <aura:if isTrue="{!v.currentLinkIndicator == 'MatchGift'}">
                            Match a Gift
                        </aura:if>
                        <aura:if isTrue="{!v.currentLinkIndicator == 'Credit4Other'}">
                            Add a Credit for Other Account
                        </aura:if>
                    </h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                            <aura:if isTrue="{!v.currentLinkIndicator == 'AddTransaction'}">
                                Listed below are all gifts from this account.  Select the gift to which a Transaction is to be added.
                            </aura:if>
                            <aura:if isTrue="{!v.currentLinkIndicator == 'Void'}">
                                Listed below are all gifts from this account.  Select the gift which contains the transaction to be voided.
                            </aura:if>
                            <aura:if isTrue="{!v.currentLinkIndicator == 'MatchGift'}">
                                Listed below are all gifts from this account.  Select the gift for which a Matching Gift is to processed.
                            </aura:if>
                            <aura:if isTrue="{!v.currentLinkIndicator == 'Credit4Other'}">
                            	Listed below are all gifts from this account.  Select the gift for which a Soft Credit will be awarded.
                        	</aura:if>
                        </legend>
                        <br />
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col"><span class="slds-truncate">Action</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Gift/Pledge #</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Fundraising Campaign</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Total Gift</span></th> 
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Pledge Balance</span></th> 
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Matched</span></th> 
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.gifts}" var="g">
                                    <tr>
                                        <td>
                                            <aura:if isTrue="{!v.currentLinkIndicator == 'AddTransaction'}">
                                                <a href="" style="color: blue" id="{!'G' + g.Id}" onclick="{!c.addTransaction2Existing}">Add Transaction</a>
                                            </aura:if>
                                            <aura:if isTrue="{!v.currentLinkIndicator == 'Void'}">
                                                <a href="" style="color: blue" id="{!'G' + g.Id}" onclick="{!c.voidGift}">Void Transaction(s) from this Gift</a>
                                            </aura:if>
                                            <aura:if isTrue="{!v.currentLinkIndicator == 'MatchGift'}">
                                                <a href="" style="color: blue" id="{!'G' + g.Id}" onclick="{!c.matchGift}">Process Match Gift</a>
                                            </aura:if>
                                            <aura:if isTrue="{!v.currentLinkIndicator == 'Credit4Other'}">
                                                <a href="" style="color: blue" id="{!'G' + g.Id}" onclick="{!c.addCredit4Other}">Add Soft Credit to Other Account</a>
                                            </aura:if>
                                        </td>
                                        <td style="text-align:center">
                                            <a href="{!'/' + g.Id}" target="_blank">{!g.Name}</a>
                                        </td>
                                        <td style="text-align:center">
                                            {!g.AQB__Date__c}
                                        </td>
                                        <td style="text-align:center">
                                            <a href="{!'/' + g.AQB__CampaignFund__c}" target="_blank">{!g.AQB__CampaignFund__r.Name}</a>
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!g.AQB__TotalGift__c}" />
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!g.AQB__PledgeBalanceTotal__c}" />
                                        </td>
                                        <td>
                                            <center><ui:outputCheckbox value="{!g.AQB__Matched__c}"/></center>
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <ui:button label="Cancel" press="{!c.resetForm}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Select Matching Account -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="matchingAccountsDialog">
            <div id="ex1" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <h2 class="slds-text-heading--medium">Matching Account Options</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps">
                            <span style="font-weight: bold;">Select an account option below to process the matching gift</span>
                        </legend>
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <tbody>
                                <aura:iteration items="{!v.matchingAccounts}" var="a">
                                    <tr>
                                        <td>
                                            <input type="radio" id="{!a.Id}" name="accountOption" label="" onchange="{!c.setAccountOption}" />&nbsp;
                                            <a href="{!'/' + a.AQB__MatchingAccount__c}" target="_blank">{!a.AQB__MatchingAccount__r.Name}</a>
                                        </td>
                                        <td>
                                            Match Multiple:  <ui:outputNumber value="{!a.AQB__matchMultiple1__c}" format=".00" />
                                        </td>
                                    </tr>
                                </aura:iteration>
                                <tr>
                                    <td>
                                        <input type="radio" id="useNew" name="accountOption" label="" onchange="{!c.setAccountOption}" />&nbsp;Use this Account 
                                    </td>
                                    <td>
                                        <force:inputField aura:id="newAccountLookup" value="{!v.newAccount.AQB__Account__c}" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <center>
                            <ui:button label="OK" press="{!c.saveMatchingAccountOption}" />
                            <ui:button label="Cancel" press="{!c.resetForm}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Soft Credit -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="softCreditDialog">
            <div id="ex1" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideSoftCreditPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">{!v.scHeader}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                            Choose whether to Create a Soft Credit for {!v.scAccount}
                        </legend>
                        <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                            <tbody>
                                <tr>
                                    <td>
                                        <input type="radio" id="newSoftCredit" name="softCreditOption" label="" onchange="{!c.setSoftCreditOption}" />&nbsp;Create a New Soft Credit for {!v.scAccount}
                                    </td>
                                </tr>
                                <tr>
                                    <td>
										<aura:if isTrue="{!and(v.addSoftCredit != true, v.currentLinkIndicator != 'Credit4Other')}">                                        
                                        	<input type="radio" id="ignoreSoftCredit" name="softCreditOption" label="" onchange="{!c.setSoftCreditOption}" />&nbsp;Do Not Create a Soft Credit for {!v.scAccount}
                                        </aura:if>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br />
                        <aura:if isTrue="{!and(v.newItem.AQB__Method__c != 'Pledge', v.openPledges.length != 0)}"> 
                            <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                                Or Choose a pledge for {!v.scAccount} to be reduced by the soft credit.
                            </legend>
                            <br />
                            <table class="slds-table slds-table--bordered slds-table--striped" style="width:100%;">
                                <thead>
                                    <tr class="slds-text-heading--label">
                                        <th scope="col"><span class="slds-truncate">Number</span></th>
                                        <th scope="col"><span class="slds-truncate">Date</span></th>
                                        <th scope="col"><span class="slds-truncate">Fundraising Campaign</span></th>
                                        <th scope="col"><span class="slds-truncate">Total Pledge</span></th> 
                                        <th scope="col"><span class="slds-truncate">Pledge Balance</span></th> 
                                        <th scope="col"><span class="slds-truncate">Next Payment Due Date</span></th> 
                                        <th scope="col"><span class="slds-truncate">Pledge Designation</span></th> 
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.openPledges}" var="p">
                                        <tr>
                                            <td>
                                                <input type="radio" id="{!p.Id}" name="softCreditOption" label="" onchange="{!c.setSoftCreditOption}" />&nbsp;
                                                <a href="{!'/' + p.Id}" target="_blank">{!p.Name}</a>
                                            </td>
                                            <td>
                                                {!p.AQB__Date__c}
                                            </td>
                                            <td>
                                                <a href="{!'/' + p.AQB__CampaignFund__c}" target="_blank">{!p.AQB__CampaignFund__r.Name}</a>
                                            </td>
                                            <td>
                                                <ui:outputCurrency value="{!p.AQB__RollUpRestrictedTotal__c}" />
                                            </td>
                                            <td>
                                                <ui:outputCurrency value="{!p.AQB__RollUpPledgeBalanceTotal__c}" />
                                            </td>
                                            <td>
                                                {!p.AQB__NextPledgeDueDate__c}
                                            </td>
                                            <td>
                                                {!p.AQB__GiftDescription__c}
                                            </td>
                                        </tr>
                                    </aura:iteration>
                                </tbody>
                            </table>
                            <br />
                            <div style="display: none; width=100%" id="softCreditPaymentForm">
                                <legend class="slds-form-element__label">
                                    <span style="font-weight: bold;">Enter individual amounts of the transactions to be paid:</span>
                                </legend>
                                <table class="slds-table slds-table--bordered" style="width=96%;">
                                    <tr>
                                        <td style="padding-left: 2%; text-align:right">Total Amount:</td>
                                        <td style="padding-left: 1%;"><ui:outputCurrency value="{!v.selectedTotal}" /></td>
                                        <td style="padding-left: 2%; text-align:right;">Remaining Amount:</td>	
                                        <td style="padding-left: 1%; text-align:left; font-weight: bold;"><ui:outputCurrency value="{!v.transactionTotal}" /></td>
                                    </tr>
                                </table>
                                <table class="slds-table slds-table--bordered" style="width=100%;">
                                    <thead>
                                        <tr class="slds-text-heading--label">
                                            <th scope="col" style="text-align:center"><span class="slds-truncate">Amount</span></th>
                                            <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction Number</span></th>
                                            <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction Date</span></th>
                                            <th scope="col" style="text-align:right"><span class="slds-truncate">Balance</span></th>
                                            <th scope="col" style="text-align:center"><span class="slds-truncate">Due Date</span></th>
                                            <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                                            <th scope="col" style="text-align:center"><span class="slds-truncate">Designation</span></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.openPledgeTransactions}" var="ptrans">
                                            <tr>
                                                <td style="text-align:right">
                                                    <ui:inputCurrency aura:id="SCamt" value="" class="{!ptrans.Id}" change="{!c.updatePP}" size="5" />
                                                </td>
                                                <td style="text-align:center">
                                                    <a href="{!'/' + ptrans.Id}" target="_blank">{!ptrans.Name}</a>
                                                </td>
                                                <td style="text-align:center">
                                                    <ui:outputDate value="{!ptrans.AQB__Date__c}" />
                                                </td>
                                                <td style="text-align:right">
                                                    <ui:outputCurrency value="{!ptrans.AQB__Balance__c}" />
                                                </td>
                                                <td style="text-align:center">
                                                    <ui:outputDate value="{!ptrans.AQB__DateDue__c}" />
                                                </td>
                                                <td style="text-align:center">
                                                    {!ptrans.AQB__CampaignAppeal__r.Name}
                                                </td>
                                                <td style="text-align:center">
                                                    {!ptrans.AQB__ChartofAccounts__r.Name}
                                                </td>
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                                <br />
                            </div>
                        </aura:if>
                        <center>
                            <ui:button label="Save" press="{!c.saveSoftCredit}" />
                            <ui:button label="Cancel" press="{!c.hideSoftCreditPopup}" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Choose Gift Transaction -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--large slds-modal--prompt slds-fade-in-hide;" aura:id="giftTransactionDialog">
            <div id="ex1" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideGiftTransactionPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close">
                        </AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium">Convert Gift to Pledge Payment for {!v.currentAccountName}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div>
                        <legend class="slds-form-element__label slds-text-title--caps" style="font-weight: bold;">
                            Choose Gift Transaction to Convert to Pledge Payment
                        </legend>
                        <table class="slds-table slds-table--bordered" style="width=100%;">
                            <thead>
                                <tr class="slds-text-heading--label">
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Action</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Transaction #</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Date</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Method</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Campaign Appeal</span></th>
                                    <th scope="col" style="text-align:right"><span class="slds-truncate">Amount</span></th>
                                    <th scope="col" style="text-align:center"><span class="slds-truncate">Designaiton</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.giftTransactions}" var="trans">
                                    <tr>
                                        <td>
                                        	<a href="" style="color: blue" id="{!'C' + trans.Id}" onclick="{!c.convertTransaction2Payment}">Convert Transaction</a>
                                         </td>
                                        <td style="text-align:center">
                                            <a href="{!'/' + trans.Id}" target="_blank">{!trans.Name}</a>
                                        </td>
                                        <td style="text-align:center">
                                            <ui:outputDate value="{!trans.AQB__Date__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            {!trans.AQB__Method__c}
                                        </td>
                                        <td style="text-align:center">
                                            {!trans.AQB__CampaignAppeal__r.Name}
                                        </td>
                                        <td style="text-align:right">
                                            <ui:outputCurrency value="{!trans.AQB__Amount__c}" />
                                        </td>
                                        <td style="text-align:center">
                                            {!trans.AQB__ChartofAccounts__r.Name}
                                        </td>
                                    </tr>
                                </aura:iteration>
                            </tbody>
                        </table>
                        <br />
                        <center>
                        	<ui:button label="Cancel" press="{!c.resetForm}" />
                        </center>
                        <br />
                        <br />
                    </div>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Delete Verification -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-hide;" aura:id="confirmDeleteDialog">
            <div id="ex8" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <h2 class="slds-text-heading--medium">Delete {!v.popupHeader}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <center>
                        Are you sure you want to delete this {!v.popupHeader} for {!v.currentAccountName}?
                        <br /><br />
                        <aura:if isTrue="{!v.popupHeader == 'Batch Item'}"> 
                            <ui:button label="Yes" press="{!c.deleteBatchItem}" />
                        </aura:if>
                        <aura:if isTrue="{!v.popupHeader == 'Transaction'}"> 
                            <ui:button label="Yes" press="{!c.deleteTransaction}" />
                        </aura:if>
                        <aura:if isTrue="{!v.popupHeader == 'Tribute'}"> 
                            <ui:button label="Yes" press="{!c.deleteTribute}" />
                        </aura:if>
                        <aura:if isTrue="{!v.popupHeader == 'Recognition Credit'}"> 
                            <ui:button label="Yes" press="{!c.deleteRecognition}" />
                        </aura:if>
                        <aura:if isTrue="{!v.popupHeader == 'Match Potential'}"> 
                            <ui:button label="Yes" press="{!c.deleteMatch}" />
                        </aura:if>
                        <aura:if isTrue="{!v.popupHeader == 'Quid Pro Quo'}"> 
                            <ui:button label="Yes" press="{!c.deleteQuid}" />
                        </aura:if>
                        <ui:button label="No" press="{!c.hideConfirmDeletePopup}" />
                    </center>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Void Verification -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-hide;" aura:id="confirmVoidDialog">
            <div id="ex8" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <h2 class="slds-text-heading--medium">Void Transactions</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <center>
                        <span style="font-weight: bold; font-size: larger;">Warning! Once the batch is closed and the 
							transaction(s) have been voided, they cannot be recovered nor may it be edited or deleted.</span>
                        <br /><br />
                        <span style="font-weight: bold; color: red;">*</span>Enter a Description for the void(s): <force:inputField value="{!v.newItem.AQB__Description__c}" />
                        <br /><br />
                        <ui:button label="Void Transaction(s)" press="{!c.voidTransactions}" />
                        <ui:button label="Cancel" press="{!c.hideConfirmVoidPopup}" />
                    </center>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Partial Write Off Verification -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-hide;" aura:id="confirmWoDialog">
            <div id="ex8" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <h2 class="slds-text-heading--medium">Write Off Transaction</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <center>
                        <span style="font-weight: bold; font-size: larger;">If this is a partial write off, please change the Balance amount and enter the Due Date for the remaining balance.</span>
                        <br /><br />
                        <table class="slds-table slds-table--bordered">
                            <tr>
                                <td style="width: 10%; text-align:right">Balance:</td>
                                <td style="padding-left: 10px; width: 40%;"><force:inputField value="{!v.newTransaction.AQB__Amount__c}" /></td>
                                <td style="padding-left: 20px; width: 10%; text-align:right;">Due Date:</td>	
                                <td style="padding-left: 10px; width: 40%; text-align:left;"><force:inputField value="{!v.newTransaction.AQB__DateDue__c}" /></td>
                            </tr>
                        </table>
                        <br /><br />
                        <ui:button label="Write Off Transaction" press="{!c.writeOffTransaction}" />
                        <ui:button label="Cancel" press="{!c.hideConfirmWoDialog}" />
                    </center>
                </div>
            </div>
        </div>
    </div>    
    
    <!-- Error Notification -->
    <div class="slds">
        <div aria-hidden="true" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-hide;" aura:id="errorDialog">
            <div id="err1" class="slds-modal__container">
                <div class="slds-modal__header slds-theme--info">
                    <button class="slds-button slds-button--icon-inverse slds-notify__close" onclick="{!c.hideErrorPopup}" style="float:right">
                        <AQB:svg class="slds-button__icon slds-button__icon--large" xlinkHref="/resource/SLDS214/assets/icons/action-sprite/svg/symbols.svg#close"></AQB:svg>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading--medium"><span style="font-weight: bold;">Error</span></h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <center>
                        <span style="font-weight: bold; font-size: larger;">{!v.errorMessage}</span>
                        <br /><br />
                        <ui:button label="OK" press="{!c.hideErrorPopup}" />
                    </center>
                </div>
            </div>
        </div>
    </div>    
    
</aura:component>